{"version":3,"sources":["../static/js/12.eeb0f5ec.chunk.js","views/eshop/MessageList/MessageList.js"],"names":["webpackJsonp","736","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_1_reactstrap__","__WEBPACK_IMPORTED_MODULE_2__eshop__","__WEBPACK_IMPORTED_MODULE_3__conponents_AccountDialog_AccountDialog__","__WEBPACK_IMPORTED_MODULE_4__ggv_js_gegeUtil__","__WEBPACK_IMPORTED_MODULE_5__conponents_MessageDialog_MessageDialog__","__WEBPACK_IMPORTED_MODULE_6_react_quill__","__WEBPACK_IMPORTED_MODULE_6_react_quill___default","__WEBPACK_IMPORTED_MODULE_7_react_quill_dist_quill_snow_css__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","MessageList","_Component","this","_this","getPrototypeOf","state","page","list","account","secret","loadAll","_this2","data","type","rsId","ok","setState","bind","_this3","map","res","d","Date","setTime","time","btime","toLocaleString","update","block","substring","a","createElement","from","to","renderDecBtn","toPk","pk","decrypt","isOpen","toggle","toggleDecrypt","className","clearMsg","color","onClick","msg","_this4","size","e","nonce","_this5","hover","bordered","striped","responsive","renderMessageList","renderClearMsgDialog","previous","tag","prePage","active","next","nextPage"],"mappings":"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","file":"static/js/12.eeb0f5ec.chunk.js","sourcesContent":["webpackJsonp([12],{\n\n/***/ 736:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_reactstrap__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__eshop__ = __webpack_require__(43);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__eshop___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__eshop__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__conponents_AccountDialog_AccountDialog__ = __webpack_require__(109);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ggv_js_gegeUtil__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ggv_js_gegeUtil___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__ggv_js_gegeUtil__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__conponents_MessageDialog_MessageDialog__ = __webpack_require__(276);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react_quill__ = __webpack_require__(268);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react_quill___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_react_quill__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react_quill_dist_quill_snow_css__ = __webpack_require__(269);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react_quill_dist_quill_snow_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_react_quill_dist_quill_snow_css__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var MessageList=function(_Component){_inherits(MessageList,_Component);function MessageList(props){_classCallCheck(this,MessageList);var _this=_possibleConstructorReturn(this,(MessageList.__proto__||Object.getPrototypeOf(MessageList)).call(this,props));_this.state={page:1,list:[]};return _this;}_createClass(MessageList,[{key:'componentDidMount',value:function componentDidMount(){var account=Object(__WEBPACK_IMPORTED_MODULE_4__ggv_js_gegeUtil__[\"loadLocalAccount\"])();if(account&&account.secret){this.secret=account.secret;this.account=account;}if(this.account)this.loadAll();}},{key:'loadAll',value:function loadAll(){var _this2=this;var data={type:'list',rsId:this.account.rsId,page:this.state.page};Object(__WEBPACK_IMPORTED_MODULE_2__eshop__[\"doMessage\"])(data,function(ok,data){if(ok&&data.ok&&data.list){_this2.setState({list:data.list});}}.bind(this));}},{key:'prePage',value:function prePage(){this.state.page--;this.loadAll();}},{key:'nextPage',value:function nextPage(){this.state.page++;this.loadAll();}},{key:'renderMessageList',value:function renderMessageList(){var _this3=this;var list=this.state.list;if(!list)return null;var content=list.map(function(res){var d=new Date();d.setTime(res.time);var btime=d.toLocaleString();//\nd.setTime(res.update);var update=d.toLocaleString();//block\nvar block=res.block;if(block.length>50){block=block.substring(0,40)+\" ...\";}return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('tr',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__conponents_AccountDialog_AccountDialog__[\"a\" /* default */],{rsId:res.from})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__conponents_AccountDialog_AccountDialog__[\"a\" /* default */],{rsId:res.to})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,block),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,btime),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',null,_this3.renderDecBtn(res),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__conponents_MessageDialog_MessageDialog__[\"a\" /* default */],{to:res.from,toPk:res.pk}))));});return content;}},{key:'toggleDecrypt',value:function toggleDecrypt(){this.setState({decrypt:!this.state.decrypt});}},{key:'renderClearMsgDialog',value:function renderClearMsgDialog(){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"C\" /* Modal */],{isOpen:this.state.decrypt,toggle:this.toggleDecrypt.bind(this),className:'modal-info '+this.props.className},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"F\" /* ModalHeader */],{toggle:this.toggleDecrypt.bind(this)},'Decrypt(\\u6D88\\u606F\\u89E3\\u5BC6)'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"D\" /* ModalBody */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6_react_quill___default.a,{value:this.state.clearMsg})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"E\" /* ModalFooter */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"e\" /* Button */],{color:'info',onClick:this.toggleDecrypt.bind(this)},'OK')));}},{key:'renderDecBtn',value:function renderDecBtn(msg){var _this4=this;return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"e\" /* Button */],{color:'primary',size:'sm',onClick:function(e){var clearMsg=Object(__WEBPACK_IMPORTED_MODULE_2__eshop__[\"shareDecrypt\"])(_this4.secret,msg.pk,msg.nonce,msg.block);_this4.setState({clearMsg:clearMsg,decrypt:true});}.bind(this)},'Dec(\\u89E3\\u5BC6)');}},{key:'render',value:function render(){var _this5=this;return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"g\" /* Card */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"h\" /* CardBody */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"T\" /* Table */],{hover:true,bordered:true,striped:true,responsive:true,size:'sm'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('thead',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('tr',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',null,'From(\\u53D1\\u9001\\u65B9)'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',null,'To(\\u63A5\\u6536\\u65B9)'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',null,'Block(\\u52A0\\u5BC6\\u6D88\\u606F)'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',null,'Time(\\u65F6\\u95F4)'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',null,'Action(\\u64CD\\u4F5C)'))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('tbody',null,this.renderMessageList(),this.renderClearMsgDialog())),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('nav',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"J\" /* Pagination */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"K\" /* PaginationItem */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"L\" /* PaginationLink */],{previous:true,tag:'button',onClick:function onClick(e){_this5.prePage();}},'Prev(\\u4E0A\\u4E00\\u9875)')),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"K\" /* PaginationItem */],{active:true},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"L\" /* PaginationLink */],{tag:'button'},this.state.page)),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"K\" /* PaginationItem */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"L\" /* PaginationLink */],{next:true,tag:'button',onClick:function onClick(e){_this5.nextPage();}},'Next(\\u4E0B\\u4E00\\u9875)')))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"a\" /* Alert */],{color:'danger'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('small',null,'\\u6240\\u6709\\u6D88\\u606F\\u90FD\\u5E26\\u6709\\u6570\\u5B57\\u7B7E\\u540D\\u4E0E\\u65F6\\u95F4\\u6233\\u3002\\u5929\\u7136\\u5177\\u6709\\u4E0D\\u53EF\\u4F2A\\u9020\\uFF0C\\u4E0D\\u53EF\\u62B5\\u8D56\\u3001\\u4E0D\\u53EF\\u7BE1\\u6539\\u7279\\u6027\\u3002')),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"a\" /* Alert */],{color:'danger'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('small',null,'\\u8D26\\u6237\\u91D1\\u989D\\u5168\\u90E8\\u5927\\u4E8E0\\u7684\\u4E24\\u4E2A\\u8D26\\u6237\\u4E4B\\u95F4\\u624D\\u53EF\\u4EE5\\u53D1\\u9001\\u6D88\\u606F.\\u6D88\\u606F\\u52A0\\u5BC6\\u540E\\u53EA\\u6709\\u53CC\\u65B9\\u53EF\\u4EE5\\u89E3\\u5BC6\\uFF0C\\u4EFB\\u4F55\\u5176\\u4ED6\\u4EBA\\u90FD\\u65E0\\u6CD5\\u67E5\\u770B.'))));}}]);return MessageList;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);/* harmony default export */ __webpack_exports__[\"default\"] = (MessageList);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/12.eeb0f5ec.chunk.js","import React, { Component } from 'react';\r\nimport { Badge, Card, CardBody, CardHeader, Col, Pagination, PaginationItem, PaginationLink, Row, Table } from 'reactstrap';\r\nimport { Button, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\r\nimport { CardGroup, Container, Form, FormGroup, Fade, Alert, Label } from 'reactstrap'\r\nimport { Modal, ModalBody, ModalFooter, ModalHeader, ButtonDropdown, DropdownItem, DropdownMenu, DropdownToggle } from 'reactstrap'\r\nimport { shareDecrypt, doMessage } from '../eshop'\r\nimport AccountDialog from '../../conponents/AccountDialog/AccountDialog'\r\nimport { loadLocalAccount, sign } from '../../ggv/js/gegeUtil'\r\nimport MessageDialog from '../../conponents/MessageDialog/MessageDialog'\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\n\r\n\r\nclass MessageList extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { page: 1, list: [] }\r\n  }\r\n\r\n  componentDidMount() {\r\n    let account = loadLocalAccount();\r\n    if (account && account.secret) {\r\n      this.secret = account.secret;\r\n      this.account = account;\r\n    }\r\n    if (this.account)\r\n      this.loadAll()\r\n  }\r\n\r\n  loadAll() {\r\n    let data = { type: 'list', rsId: this.account.rsId, page: this.state.page }\r\n    doMessage(data, ((ok, data) => {\r\n      if (ok && data.ok && data.list) {\r\n        this.setState({ list: data.list })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n  prePage() {\r\n    this.state.page--\r\n    this.loadAll()\r\n  }\r\n\r\n  nextPage() {\r\n    this.state.page++\r\n    this.loadAll()\r\n  }\r\n\r\n  renderMessageList() {\r\n    let list = this.state.list;\r\n    if (!list)\r\n      return null;\r\n    let content = list.map((res) => {\r\n      let d = new Date();\r\n      d.setTime(res.time)\r\n      let btime = d.toLocaleString()\r\n      //\r\n      d.setTime(res.update)\r\n      let update = d.toLocaleString()\r\n      //block\r\n      let block = res.block;\r\n      if (block.length > 50) {\r\n        block = block.substring(0, 40) + \" ...\"\r\n      }\r\n      return (<tr>\r\n        <td><AccountDialog rsId={res.from} /></td>\r\n        <td><AccountDialog rsId={res.to} /></td>\r\n        <td>{block}</td>\r\n        <td>{btime}</td>\r\n        <td><div>{this.renderDecBtn(res)}<MessageDialog to={res.from} toPk={res.pk} /></div></td>\r\n      </tr>)\r\n    });\r\n\r\n    return content;\r\n  }\r\n\r\n  toggleDecrypt() {\r\n    this.setState({\r\n      decrypt: !this.state.decrypt,\r\n    });\r\n  }\r\n\r\n  renderClearMsgDialog() {\r\n    return (<Modal isOpen={this.state.decrypt} toggle={this.toggleDecrypt.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleDecrypt.bind(this)}>Decrypt(消息解密)</ModalHeader>\r\n      <ModalBody>\r\n        <ReactQuill value={this.state.clearMsg} />\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"info\" onClick={this.toggleDecrypt.bind(this)}>OK</Button>\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  renderDecBtn(msg) {\r\n    return (<Button color=\"primary\" size='sm' onClick={((e) => {\r\n      let clearMsg = shareDecrypt(this.secret, msg.pk, msg.nonce, msg.block)\r\n\r\n      this.setState({ clearMsg, decrypt: true })\r\n    }).bind(this)}>\r\n      Dec(解密)\r\n   </Button>)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Card>\r\n        <CardBody>\r\n          <Table hover bordered striped responsive size=\"sm\">\r\n            <thead>\r\n              <tr>\r\n                <th>From(发送方)</th>\r\n                <th>To(接收方)</th>\r\n                <th>Block(加密消息)</th>\r\n                <th>Time(时间)</th>\r\n                <th>Action(操作)</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.renderMessageList()}\r\n              {this.renderClearMsgDialog()}\r\n            </tbody>\r\n          </Table>\r\n          <nav>\r\n            <Pagination>\r\n              <PaginationItem><PaginationLink previous tag=\"button\" onClick={(e) => { this.prePage() }}>Prev(上一页)</PaginationLink></PaginationItem>\r\n              <PaginationItem active>\r\n                <PaginationLink tag=\"button\">{this.state.page}</PaginationLink>\r\n              </PaginationItem>\r\n              <PaginationItem><PaginationLink next tag=\"button\" onClick={(e) => { this.nextPage() }}>Next(下一页)</PaginationLink></PaginationItem>\r\n            </Pagination>\r\n          </nav>\r\n          <Alert color=\"danger\"><small>所有消息都带有数字签名与时间戳。天然具有不可伪造，不可抵赖、不可篡改特性。</small></Alert>\r\n          <Alert color=\"danger\"><small>账户金额全部大于0的两个账户之间才可以发送消息.消息加密后只有双方可以解密，任何其他人都无法查看.</small></Alert>\r\n        </CardBody>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MessageList;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/eshop/MessageList/MessageList.js"],"sourceRoot":""}