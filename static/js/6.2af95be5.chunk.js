webpackJsonp([6],{723:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=a(1),i=a.n(r),c=a(8),o=a(32),u=(a.n(o),a(11)),d=a.n(u),p=a(268),h=a.n(p),m=a(269),g=(a.n(m),a(109)),E=a(267),f=a(110),v=a(826),b=a(156),y=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),k=a(43),T=k.loadProductList,C=k.loadProduct,S=k.doBShopTransaction,P=k.getProductStatus,D=k.loadProductDetails,I=k.loadJoinTransactions,B=k.loadIssueTransactions,N=k.shareEncrypt,w=k.getProductNextStep,j=function(t){function a(e){n(this,a);var t=l(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.deadline=5,t.fee="1",t.state={account:{},list:[],page:1,joinsPage:1,addProduct:!1,join:!1,detailProduct:null,detail:!1,paying:null,activeTab:"0",detailTab:"0",joins:null,showAccount:!1,content:"\u5728\u6b64\u7f16\u8f91\u7269\u54c1\u7684\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u6240\u5728\u57ce\u5e02\uff0c\u8054\u7cfb\u65b9\u5f0f\u7b49\u4fe1\u606f.",filterValue:null,success:!1,issuePage:1},t.modules={toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],[{align:[]},"direction"],["bold","italic","underline","strike","blockquote","code-block"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]],clipboard:{matchVisual:!1}},t}return s(a,t),y(a,[{key:"componentDidMount",value:function(){var e=this,t=Object(o.loadLocalAccount)();t&&t.secret&&(this.secret=t.secret),this.setState({account:t});var a=window.location.hash,n=null;if(a){var l=a.indexOf("#",1);l>0&&(n=a.substr(l+1,40),(l=n.indexOf("#",1))>0&&(n=n.substr(0,l)))}setTimeout(function(){n?C(e.onProductList.bind(e),n):T(e.onProductList.bind(e),1,e.state.activeTab)}.bind(this),500)}},{key:"onProductList",value:function(e,t){e?this.setState({list:t}):this.setState({list:[]})}},{key:"prePage",value:function(){this.state.page>1&&(this.state.page--,T(this.onProductList.bind(this),this.state.page,this.state.activeTab,"0",this.state.filterValue))}},{key:"nextPage",value:function(){this.state.page++,T(this.onProductList.bind(this),this.state.page,this.state.activeTab,"0",this.state.filterValue)}},{key:"filterBlocks",value:function(){this.setState({page:1}),T(this.onProductList.bind(this),1,this.state.activeTab,"0",this.state.filterValue)}},{key:"togglePublishProduct",value:function(){this.setState({addProduct:!this.state.addProduct,success:!1})}},{key:"toggleJoin",value:function(){this.setState({join:!this.state.join,joinsPage:1,success:!1,dialogMsg:""})}},{key:"toggleDetail",value:function(){this.setState({detail:!this.state.detail,issues:null,joins:null,detailTab:"0"})}},{key:"onSecret",value:function(e){if(e){this.secret=e;var t=Object(o.calcAccountId)(this.userSec);this.setState({rsId:t})}}},{key:"updateFee",value:function(e){e&&e.target&&(this.fee=e.target.value,0==this.fee.length&&(this.fee=1))}},{key:"updatePrice",value:function(e){e&&e.target&&(this.price=e.target.value)}},{key:"updateExpire",value:function(e){e&&e.target&&(this.expire=e.target.value)}},{key:"updateQuality",value:function(e){e&&e.target&&(this.quality=e.target.value)}},{key:"updateGuarantee",value:function(e){e&&e.target&&(this.guarantee=e.target.value)}},{key:"updateTags",value:function(e){e&&e.target&&(this.tags=e.target.value)}},{key:"updateDeadline",value:function(e){e&&e.target&&(this.deadline=e.target.value,0==this.deadline.length&&(this.deadline=5))}},{key:"updateTitle",value:function(e){e&&e.target&&(this.title=e.target.value)}},{key:"updateAddress",value:function(e){e&&e.target&&(this.address=e.target.value,this.updateAddressBlock())}},{key:"updateContact",value:function(e){e&&e.target&&(this.contact=e.target.value,this.updateAddressBlock())}},{key:"updatePhone",value:function(e){e&&e.target&&(this.phone=e.target.value,this.updateAddressBlock())}},{key:"updateAddressBlock",value:function(){var e={contract:this.contact,address:this.address,phone:this.phone};e=JSON.stringify(e);var t=this.state.productDetail.seller,a=N(this.secret,t,this.state.product.transactionId,e);this.setState({addressBlock:a,addressHash:""})}},{key:"doJoin",value:function(){var e=this,t=this.state.product.transactionId,a=Object(o.createPeerId)(this.secret),n={action:"transaction",type:"sjoin",amount:this.joinAmount,fee:this.fee,price:this.price,dealine:this.deadline,sid:t,pk:a.pk,accountId:a.aid};S(this.secret,n,function(t,a){t&&a&&a.ok?(Object(o.saveUserSec)(e.secret),e.setState({dialogMsg:"success(\u6210\u529f),\u7b49\u5f85\u77ff\u5de5\u9a8c\u8bc1(\u5927\u7ea6\u4e00\u5206\u949f).",success:!0})):a&&!a.ok&&"1001"===a.code?e.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002",renderDesposit:!0}):e.setState({dialogMsg:"err(\u5931\u8d25)"})}.bind(this))}},{key:"publishProduct",value:function(){var t=this,a={tags:this.tags,title:this.title,address:"",content:this.state.content,quality:0},n=Object(o.createPeerId)(this.secret),l=JSON.stringify(a),s=new e(l).toString("base64"),r={action:"transaction",type:"shopshare",productJson:s,guarantee:this.guarantee,fee:this.fee,price:this.price,expire:this.expire,dealine:this.deadline,pk:n.pk,accountId:n.aid,productDetail:null};S(this.secret,r,function(e,a){if(e&&a&&a.ok){Object(o.saveUserSec)(t.secret);Object(o.getCurrentHost)(),a.transactionId;t.setState({dialogMsg:"Success(\u53d1\u5e03\u6210\u529f),\u77ff\u5de5\u9a8c\u8bc1\u540e(\u5927\u7ea6\u4e00\u5206\u949f)\u5373\u53ef\u62a2\u8d2d.",success:!0})}else a&&!a.ok&&"1001"===a.code?t.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002",renderDesposit:!0}):t.setState({dialogMsg:"err(\u5931\u8d25)"})}.bind(this))}},{key:"handleChange",value:function(e){this.setState({content:e})}},{key:"rederAddProductDialog",value:function(){var e=this;return i.a.createElement(c.C,{isOpen:this.state.addProduct,toggle:this.togglePublishProduct.bind(this),className:"modal-info "+this.props.className},i.a.createElement(c.F,{toggle:this.togglePublishProduct.bind(this)},"Sell(\u51fa\u552e\u7269\u54c1)"),i.a.createElement(c.D,null,i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(f.a,{onSecret:this.onSecret.bind(this)}))),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,"(\u7269\u54c1\u540d\u79f0)Title:")),i.a.createElement(c.t,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateTitle.bind(this),placeholder:"Title \u7269\u54c1\u540d\u79f0"})))),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,"(\u7269\u54c1\u6807\u7b7e)Tags:")),i.a.createElement(c.t,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateTags.bind(this),placeholder:"tags \u5546\u54c1\u5173\u952e\u5b57\uff0c\u65b9\u4fbf\u641c\u7d22"})))),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,"Price(\u4ef7\u683c):")),i.a.createElement(c.t,{id:"appendedPrependedInput3",size:"16",type:"text",onChange:this.updatePrice.bind(this),placeholder:"price\u7269\u54c1\u5305\u90ae\u4ef7\u683c\uff0c\u6700\u4f4e10\u4e2aBTB"}),i.a.createElement(c.v,{addonType:"append"},i.a.createElement(c.w,null,"BTB"))))),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,i.a.createElement(E.a,{id:"min123",text:"Guarantee(\u4fdd\u8bc1\u91d1):",content:"\u5356\u5bb6\u4fdd\u8bc1\u91d1\uff0c\u6700\u5c0f5\u4e2aBTB\uff0c\u4fdd\u8bc1\u4ea4\u6613\u771f\u5b9e\u53ef\u9760\u3002\u4ea4\u6613\u7ed3\u675f\u81ea\u52a8\u9000\u56de\u5356\u5bb6\u300210\u5929\u65e0\u4eba\u8d2d\u4e70\uff0c\u5219\u4ea4\u6613\u5173\u95ed\uff0c\u81ea\u52a8\u9000\u56de\u4fdd\u8bc1\u91d1."}))),i.a.createElement(c.t,{id:"appendedPrependedInput3",size:"16",type:"text",onChange:this.updateGuarantee.bind(this),placeholder:"\u4fdd\u8bc1\u91d1\uff0c\u4ea4\u6613\u7ed3\u675f\u540e\u81ea\u52a8\u9000\u56de"}),i.a.createElement(c.v,{addonType:"append"},i.a.createElement(c.w,null,"BTB"))))),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,i.a.createElement(E.a,{id:"min123",text:"Fee(\u77ff\u5de5\u624b\u7eed\u8d39):",content:"\u533a\u5757\u94fe\u77ff\u5de5\u4e3a\u8d26\u6237\u4f59\u989d\u6bd4\u8f83\u591a\u7684BTB\u8d26\u6237\u968f\u673a\u4ea7\u751f\uff0c\u8d1f\u8d23\u9a8c\u8bc1\u6240\u6709\u4ea4\u6613\u662f\u5426\u7b26\u5408\u89c4\u5219,\u5e76\u5c06\u5408\u6cd5\u4ea4\u6613\u4fdd\u5b58\u5230\u533a\u5757\u94fe\u3002\u77ff\u5de5\u4fdd\u8bc1\u6574\u4e2a\u7cfb\u7edf\u6309\u7167\u89c4\u5219\u8fd0\u884c\u3002\u540c\u65f6\u83b7\u5f97\u4ea4\u6613\u624b\u7eed\u8d39\u3002"}))),i.a.createElement(c.t,{id:"appendedPrependedInput",size:"16",type:"text",onChange:this.updateFee.bind(this),placeholder:"miner Fee \u533a\u5757\u94fe\u77ff\u5de5\u8d39\uff0c\u6700\u5c111\u4e2a"}),i.a.createElement(c.v,{addonType:"append"},i.a.createElement(c.w,null,"BTB"))))),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,i.a.createElement(E.a,{id:"dl4545",text:"Deadline(\u6709\u6548\u671f):",content:"\u77ff\u5de5\u9a8c\u8bc1\u4ea4\u6613\u65f6\u5019\u4f1a\u6309\u624b\u7eed\u8d39\u9ad8\u4f4e\u6392\u5e8f\u5904\u7406\uff0c\u6709\u6548\u671f\u5185\u672a\u88ab\u5904\u7406\u7684\u4ea4\u6613\u4f1a\u88ab\u820d\u5f03\u3002\u4ea4\u6613\u4f5c\u5e9f\u3002"}))),i.a.createElement(c.t,{id:"appendedPrependedInput",size:"16",onChange:this.updateDeadline.bind(this),type:"text",placeholder:"\u4ea4\u6613\u6709\u6548\u671f\uff0c\u9ed8\u8ba45\u5206\u949f"}),i.a.createElement(c.v,{addonType:"append"},i.a.createElement(c.w,null,"minutes(\u5206\u949f)"))))),i.a.createElement(c.s,null,i.a.createElement(c.x,{htmlFor:"appendedInputButtons"},"Details(\u8be6\u7ec6\u4ecb\u7ecd):"),i.a.createElement(c.a,null,i.a.createElement("small",null,"\u7b80\u5355\u6587\u5b57\u63cf\u8ff0\uff0c\u5185\u5bb9\u592a\u591a\u4f1a\u5f71\u54cd\u5904\u7406\u901f\u5ea6.\u63d0\u4ea4\u540e\u4e0d\u53ef\u4fee\u6539")),i.a.createElement(h.a,{value:this.state.content,modules:this.modules,onChange:this.handleChange.bind(this)})),i.a.createElement(c.s,null,this.renderdialogMsg())),i.a.createElement(c.E,null,i.a.createElement(c.e,{color:"danger",onClick:this.togglePublishProduct.bind(this)},"Close(\u5173\u95ed)"),i.a.createElement(c.e,{color:"danger",hidden:this.state.success,onClick:function(t){e.setState({dialogMsg:"Working...(\u53d1\u5e03\u4e2d,\u6709\u56fe\u7247\u53ef\u80fd\u9700\u8981\u51e0\u5206\u949f)"}),setTimeout(function(){e.publishProduct()},200)}.bind(this)},"Publish(\u53d1\u5e03)")))}},{key:"renderdialogMsg",value:function(){return this.state.renderDesposit?i.a.createElement("div",null,i.a.createElement(c.x,null,this.state.dialogMsg),i.a.createElement(b.a,null)):this.state.dialogMsg?i.a.createElement(c.x,null,this.state.dialogMsg):null}},{key:"setFilter",value:function(e){this.setState({page:1,activeTab:e,filterOption:this.filterMsg[e]})}},{key:"upateFilterValue",value:function(t){if(t&&t.target){var a=t.target.value;a.length>0?(a=new e(a).toString("base64"),this.setState({filterValue:a})):T(this.onProductList.bind(this),1,this.state.activeTab)}}},{key:"updateJoinAmount",value:function(e){e&&e.target&&(this.joinAmount=e.target.value)}},{key:"renderFilterOptions",value:function(){var e=this;return this.filterOptions.map(function(t,a){return i.a.createElement(c.o,{onClick:function(t){e.setFilter(a)}},t)})}},{key:"joinProduct",value:function(e){this.setState({product:e}),this.toggleJoin()}},{key:"showDetailDialog",value:function(e){var t=this;this.setState({product:e}),this.toggleDetail(),setTimeout(function(){D(e,function(e,a){if(e&&a){t.setState({productDetail:a});var n=a.joins;n&&t.setState({joins:n})}})}.bind(this),500)}},{key:"preJoinsPage",value:function(){var e=this;this.state.joinsPage>1&&this.state.joinsPage--,I(this.state.product,this.state.joinsPage,6,function(t,a){t&&a&&e.setState({joins:a})})}},{key:"nextJoinsPage",value:function(){var e=this;this.state.joinsPage++,I(this.state.product,this.state.joinsPage,6,function(t,a){t&&a&&e.setState({joins:a})})}},{key:"onDetailTabClicked",value:function(e){var t=this;this.state.detailTab!==e&&(this.setState({detailTab:e}),"1"===e&&I(this.state.product,this.state.joinsPage,6,function(e,a){e&&a&&t.setState({joins:a})}),"2"===e&&B(this.state.product,this.state.issuePage,6,function(e,a){e&&a&&t.setState({issues:a})}))}},{key:"renderJoinTransactions",value:function(){var e=this,t=this.state.joins;return t?t.map(function(t){var a=new Date;a.setTime(t.time);var n=a.toLocaleString(),l=t.winner?i.a.createElement("span",{style:{color:"red"}},"YES"):"NO";return e.state.product.status>2&&(l=t.winner?i.a.createElement("span",{style:{color:"red"}},"Winner(\u62a2\u8d2d\u6210\u529f)"):"Refunded(\u5df2\u9000\u6b3e)",11==e.state.product.status&&(l="Refunded(\u5df2\u9000\u6b3e)")),i.a.createElement("tr",null,i.a.createElement("td",null,l),i.a.createElement("td",null,i.a.createElement(g.a,{rsId:t.accountId})),i.a.createElement("td",null,t.amount,"BTB"),i.a.createElement("td",null,t.fee,"BTB"),i.a.createElement("td",null,n))}.bind(this)):null}},{key:"renderProductTabs",value:function(){var e=this;if("0"===this.state.detailTab){var t=void 0;if(this.state.productDetail.product.json&&this.state.productDetail.product.json.content&&(t=this.state.productDetail.product.json.content),t)return i.a.createElement(h.a,{value:t})}return"1"===this.state.detailTab?i.a.createElement("div",null,i.a.createElement(c.T,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Winner(\u6210\u529f)"),i.a.createElement("th",null,"Buyer(\u4e70\u5bb6)"),i.a.createElement("th",null,"Amount(\u62a2\u8d2d\u91d1\u989d)"),i.a.createElement("th",null,"Fee(\u77ff\u5de5\u8d39)"),i.a.createElement("th",null,"Time(\u65f6\u95f4)"))),i.a.createElement("tbody",null,this.renderJoinTransactions())),i.a.createElement(c.J,null,i.a.createElement(c.K,null,i.a.createElement(c.L,{previous:!0,tag:"button",onClick:function(t){e.preJoinsPage()}},"-")),i.a.createElement(c.K,{active:!0},i.a.createElement(c.L,{tag:"button"},this.state.joinsPage)),i.a.createElement(c.K,null,i.a.createElement(c.L,{next:!0,tag:"button",onClick:function(t){e.nextJoinsPage()}},"+")))):"2"===this.state.detailTab?i.a.createElement(c.T,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Account(\u8d26\u6237)"),i.a.createElement("th",null,"Buyer(\u4e70\u5bb6%)"),i.a.createElement("th",null,"Seller(\u5356\u5bb6%)"),i.a.createElement("th",null,"Fee(\u77ff\u5de5\u8d39)"),i.a.createElement("th",null,"Time(\u65f6\u95f4)"),i.a.createElement("th",null,"Note(\u8bf4\u660e)"))),i.a.createElement("tbody",null,this.renderIssueTransactions()),i.a.createElement(c.J,null,i.a.createElement(c.K,null,i.a.createElement(c.L,{previous:!0,tag:"button",onClick:function(t){e.preIssuePage()}},"-")),i.a.createElement(c.K,{active:!0},i.a.createElement(c.L,{tag:"button"},this.state.issuePage)),i.a.createElement(c.K,null,i.a.createElement(c.L,{next:!0,tag:"button",onClick:function(t){e.nextIssuePage()}},"+")))):void 0}},{key:"preIssuePage",value:function(){var e=this;this.state.issuePage--,B(this.state.product,this.state.issuePage,6,function(t,a){t&&a&&e.setState({issues:a})})}},{key:"nextIssuePage",value:function(){var e=this;this.state.issuePage++,B(this.state.product,this.state.issuePage,6,function(t,a){t&&a&&e.setState({issues:a})})}},{key:"renderIssueTransactions",value:function(){var t=this.state.issues;return t?t.map(function(t){var a=new Date;a.setTime(t.time);var n=a.toLocaleString(),l="";return t.info&&(l=new e(t.info,"base64").toString()),i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(g.a,{rsId:t.from})),i.a.createElement("td",null,t.wp,"%"),i.a.createElement("td",null,t.sp,"%"),i.a.createElement("td",null,t.fee),i.a.createElement("td",null,n),i.a.createElement("td",null,l))}.bind(this)):null}},{key:"renderProductDetail",value:function(){var e=this;if(!this.state.productDetail)return null;var t=this.state.productDetail.joinsCount;return i.a.createElement("div",null,i.a.createElement(c.G,{tabs:!0},i.a.createElement(c.H,null,i.a.createElement(c.I,{className:d()({active:"0"===this.state.detailTab}),onClick:function(){e.onDetailTabClicked("0")}},i.a.createElement("i",{className:"icon-calculator"}),i.a.createElement(c.b,{color:"success"},"Info(\u4fe1\u606f) "))),i.a.createElement(c.H,null,i.a.createElement(c.I,{className:d()({active:"1"===this.state.detailTab}),onClick:function(){e.onDetailTabClicked("1")}},i.a.createElement("i",{className:"icon-basket-loaded"}),i.a.createElement(c.b,{pill:!0,color:"danger"},"Join(\u62a2\u8d2d\u8bb0\u5f55)-(",t,")"))),this.renderIssueVoteTab()),this.renderProductTabs())}},{key:"renderIssueVoteTab",value:function(){var e=this,t=this.state.productDetail.issues.count;return this.state.product.issue?i.a.createElement(c.H,null,i.a.createElement(c.I,{className:d()({active:"2"===this.state.detailTab}),onClick:function(){e.onDetailTabClicked("2")}},i.a.createElement("i",{className:"icon-basket-loaded"}),i.a.createElement(c.b,{pill:!0,color:"danger"},"Votes(\u6295\u7968\u5217\u8868)-(",t,")"))):null}},{key:"renderPay10pbutton",value:function(){if(!this.state.productDetail)return null;var e=this.state.productDetail.winner;return e?i.a.createElement(c.z,null,i.a.createElement(E.a,{id:"wind123",text:"Winner(\u62a2\u8d2d\u6210\u529f\u8d26\u6237): ("+e.amount+"BTB)",content:"\u7cfb\u7edf\u5728\u6240\u6709\u62a2\u8d2d\u7528\u6237\u4e2d\u968f\u673a\u8ba1\u7b97\u4e00\u4f4d\u6210\u529f\u8005\uff0c\u8ba1\u7b97\u65b9\u6cd5\u4e0e\u6700\u540e\u4e00\u4f4d\u62a2\u8d2d\u7528\u6237\u7684\u4ea4\u6613\u6570\u636e\u6709\u5173\uff0c\u5728\u505c\u6b62\u8d2d\u4e70\u524d\uff0c\u6bcf\u6b21\u6709\u65b0\u7684\u7528\u6237\u52a0\u5165\u90fd\u4f1a\u91cd\u65b0\u8ba1\u7b97\u6210\u529f\u8005\u8d26\u6237\u3002\u6240\u6709\u6570\u636e\u4e0e\u7b97\u6cd5\u90fd\u662f\u516c\u5f00\uff0c\u53ef\u4ee5\u91cd\u590d\u9a8c\u8bc1\u7684\u3002"}),i.a.createElement("div",null,i.a.createElement(g.a,{rsId:e.accountId})),i.a.createElement(v.a,{product:this.state.product,productDetail:this.state.productDetail,winner:this.state.productDetail.winner})):null}},{key:"renderSteps",value:function(){return null}},{key:"renderIssueVoteList",value:function(){if(!this.state.productDetail||!this.state.productDetail.issues)return null;var e=this.state.productDetail.issues.count,t=this.state.productDetail.issues.result.sp,a=this.state.productDetail.issues.result.wp,n=this.state.productDetail.issues.result.voter;return this.state.product.issue?i.a.createElement("div",null,i.a.createElement(c.z,null,i.a.createElement(E.a,{id:"vw123",text:"Vote Winner(\u6295\u7968\u83b7\u5956\u52b1\u8d26\u6237)\uff1a",content:"\u4efb\u4f55\u8d26\u6237\u90fd\u53ef\u4ee5\u6295\u7968\u5206\u914d\u603b\u91d1\u989d\uff08\u5546\u54c1\u4ef7\u683c+\u5356\u5bb6\u4fdd\u8bc1\u91d1\uff09\u768490%\u7ed9\u4e70\u5356\u53cc\u65b9\uff0c\u5e2e\u52a9\u89e3\u51b3\u7ea0\u7eb7\uff0c\u6295\u7968\u7ed3\u675f\u7cfb\u7edf\u5c06\u968f\u673a\u9009\u53d6\u4e00\u6279\u6295\u7968\u7ed3\u679c\u5e73\u5747\u503c\u4f5c\u4e3a\u6700\u7ec8\u4e70\u5356\u53cc\u65b9\u9000\u6b3e\u91d1\u989d\u3002\u540c\u65f6\u81ea\u52a8\u628a\u603b\u91d1\u989d10%\u5956\u52b1\u7ed9\u4e0e\u6295\u7968\u7ed3\u679c\u6700\u63a5\u8fd1\u7684\u8d26\u6237\u3002"})," ",i.a.createElement(g.a,{rsId:n})," "),i.a.createElement(c.z,null,"Vote Count(\u5f53\u524d\u6295\u7968\u603b\u8ba1)\uff1a ",e,"\u7968"),i.a.createElement(c.z,null,"Vote(\u5f53\u524d\u6295\u7968\u4e70\u5bb6\u83b7\u5f97)\uff1a ",t,"%"),i.a.createElement(c.z,null,"Vote(\u5f53\u524d\u6295\u7968\u5356\u5bb6\u83b7\u5f97)\uff1a ",a,"%")):null}},{key:"renderProductDetailDialog",value:function(){if(!this.state.product)return null;var e=void 0,t=new Date;this.state.productDetail&&(t.setTime(this.state.productDetail.product.createTime),e=t.toLocaleString());var a="";return 2==this.state.product.status&&this.state.productDetail&&this.state.productDetail.product.due&&(a=" \u8fd8\u6709"+this.state.productDetail.product.due+"\u5206\u949f\u5173\u95ed\u62a2\u8d2d\u3002"),i.a.createElement(c.C,{isOpen:this.state.detail,toggle:this.toggleDetail.bind(this),className:"modal-info "+this.props.className},i.a.createElement(c.F,{toggle:this.toggleDetail.bind(this)},"Product details(\u5546\u54c1\u8be6\u7ec6\u4fe1\u606f)"),i.a.createElement(c.D,null,i.a.createElement(c.y,null,i.a.createElement(c.z,null,"Name (\u7269\u54c1)\uff1a ",this.state.product.title),i.a.createElement(c.z,null,"Owner(\u5356\u5bb6)\uff1a",i.a.createElement(g.a,{rsId:this.state.product.senderId})),i.a.createElement(c.z,null,"Time (\u4e0a\u67b6\u65f6\u95f4)\uff1a ",e),i.a.createElement(c.z,null,"Tags(\u6807\u7b7e)\uff1a",this.state.product.tags),i.a.createElement(c.z,null,"Price(\u5356\u5bb6\u539f\u4ef7)\uff1a",this.state.product.price," BTB (\u62a2\u8d2d\u4ef7)\uff1a",this.state.product.price/10," BTB "),i.a.createElement(c.z,null,"Total(\u62a2\u8d2d\u603b\u91d1\u989d)\uff1a",i.a.createElement(E.a,{id:"tamt",text:this.state.product.amout+"BTB",content:"\u62a2\u8d2d\u603b\u91d1\u989d\u5927\u4e8e\u5546\u54c1\u4ef7\u683c3\u5c0f\u65f6\u540e\u505c\u6b62\u62a2\u8d2d\u3002\u7cfb\u7edf\u968f\u673a\u9009\u53d6\u4e00\u540d\u6210\u529f\u8005\uff0c\u5e76\u81ea\u52a8\u9000\u6b3e\u7ed9\u62a2\u8d2d\u672a\u6210\u529f\u8005\u3002\u6210\u529f\u8005\u652f\u4ed810%\u4ef7\u683c\u540e\u5356\u5bb6\u53d1\u8d27\u3002\u7cfb\u7edf\u8865\u507f\u5356\u5bb690%\u5dee\u4ef7\u3002"})," ",a),i.a.createElement(c.z,null,"Guarantee(\u5356\u5bb6\u4fdd\u8bc1\u91d1)\uff1a",this.state.product.guarantee," BTB"),i.a.createElement(c.z,null,i.a.createElement(O,{mode:"step",product:this.state.product})),this.renderPay10pbutton(),this.renderIssueVoteList(),i.a.createElement(c.z,null,this.renderProductDetail()))),i.a.createElement(c.E,null,i.a.createElement(c.e,{color:"danger",onClick:this.toggleDetail.bind(this)},"Cancel(\u53d6\u6d88)"),this.renderJoinButton1()))}},{key:"renderJoinButton1",value:function(){var e=this;return this.state.product?this.state.product.status>2?null:i.a.createElement(c.e,{color:"danger",onClick:function(t){e.toggleDetail(),e.joinProduct(e.state.product)}},"Join(\u53c2\u52a0\u62a2\u8d2d)"):null}},{key:"rederJoinProductDialog",value:function(){return this.state.product?i.a.createElement(c.C,{isOpen:this.state.join,toggle:this.toggleJoin.bind(this),className:"modal-info "+this.props.className},i.a.createElement(c.F,{toggle:this.toggleJoin.bind(this)},"Join Group(\u53c2\u52a0\u62a2\u8d2d)"),i.a.createElement(c.D,null,i.a.createElement("p",null,"Name (\u7269\u54c1)\uff1a ",this.state.product.title),i.a.createElement("p",null,"Price(\u5356\u5bb6\u539f\u4ef7)\uff1a",this.state.product.price," BTB"),i.a.createElement("p",null,"(\u62a2\u8d2d\u4ef7)\uff1a",this.state.product.price/10," BTB"),i.a.createElement(c.s,null,i.a.createElement(c.x,{htmlFor:"appendedInputButtons"},"Account Secret(BTB\u8d26\u6237\u5bc6\u7801):"),i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,null,i.a.createElement(f.a,{onSecret:this.onSecret.bind(this)})))),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,i.a.createElement(E.a,{id:"min123",text:"Amount(\u62a2\u8d2d\u91d1\u989d):",content:"\u62a2\u8d2d\u91d1\u989d\u6700\u5c0f2\uff0c\u91d1\u989d\u8d8a\u5927\uff0c\u62a2\u8d2d\u6210\u529f\u673a\u4f1a\u8d8a\u5927\uff0c\u62a2\u8d2d\u672a\u6210\u529f\u91d1\u989d\u5168\u90e8\u81ea\u52a8\u9000\u56de\uff08\u62a2\u8d2d\u7ed3\u675f2\u5c0f\u65f6\u540e\uff09"}))),i.a.createElement(c.t,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateJoinAmount.bind(this),placeholder:"\u6700\u5c0f2\uff0c\u91d1\u989d\u8d8a\u5927\uff0c\u62a2\u8d2d\u6210\u529f\u673a\u4f1a\u8d8a\u5927"})))),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,i.a.createElement(E.a,{id:"min123",text:"Fee(\u77ff\u5de5\u624b\u7eed\u8d39):",content:"\u533a\u5757\u94fe\u77ff\u5de5\u4e3a\u8d26\u6237\u4f59\u989d\u6bd4\u8f83\u591a\u7684BTB\u8d26\u6237\uff0c\u8d1f\u8d23\u9a8c\u8bc1\u6240\u6709\u4ea4\u6613\u662f\u5426\u7b26\u5408\u89c4\u5219,\u5e76\u5c06\u5408\u6cd5\u4ea4\u6613\u4fdd\u5b58\u5230\u533a\u5757\u94fe\u3002\u77ff\u5de5\u4fdd\u8bc1\u6574\u4e2a\u7cfb\u7edf\u6309\u7167\u89c4\u5219\u8fd0\u884c\u3002\u540c\u65f6\u83b7\u5f97\u4ea4\u6613\u624b\u7eed\u8d39\u3002"}))),i.a.createElement(c.t,{id:"appendedPrependedInput",size:"16",type:"text",onChange:this.updateFee.bind(this),placeholder:"miner Fee \u533a\u5757\u94fe\u77ff\u5de5\u8d39\uff0c\u6700\u5c111\u4e2a"}),i.a.createElement(c.v,{addonType:"append"},i.a.createElement(c.w,null,"BTB"))))),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,i.a.createElement(E.a,{id:"dl4545",text:"Deadline(\u6709\u6548\u671f):",content:"\u77ff\u5de5\u9a8c\u8bc1\u4ea4\u6613\u65f6\u5019\u4f1a\u6309\u624b\u7eed\u8d39\u9ad8\u4f4e\u6392\u5e8f\u5904\u7406\uff0c\u6709\u6548\u671f\u5185\u672a\u88ab\u5904\u7406\u7684\u4ea4\u6613\u4f1a\u88ab\u820d\u5f03\u3002\u4ea4\u6613\u4f5c\u5e9f\u3002"}))),i.a.createElement(c.t,{id:"appendedPrependedInput",size:"16",onChange:this.updateDeadline.bind(this),type:"text",placeholder:"\u4ea4\u6613\u6709\u6548\u671f\uff0c\u9ed8\u8ba45\u5206\u949f"}),i.a.createElement(c.v,{addonType:"append"},i.a.createElement(c.w,null,"minutes(\u5206\u949f)"))))),i.a.createElement(c.s,null,i.a.createElement(c.a,{color:"danger"},i.a.createElement("small",null,"\u62a2\u8d2d\u6210\u529f\u8005\u8d26\u6237\u6839\u636e\u6700\u540e\u4e00\u4f4d\u62a2\u8d2d\u8005\u4fe1\u606f\u8ba1\u7b97\uff0c\u4e0b\u5355\u6210\u529f\u540e\u5373\u53ef\u770b\u5230\u62a2\u8d2d\u7ed3\u679c\u3002")),i.a.createElement(c.a,{color:"danger"},i.a.createElement("small",null,"\u6240\u6709\u5546\u54c1\u652f\u63017\u5929\u65e0\u7406\u7531\u9000\u8d27\uff0c\u9000\u8d27\u60c5\u51b5\u7cfb\u7edf\u81ea\u52a8\u7ed9\u4e0e\u4e70\u5356\u53cc\u65b9\u5546\u54c1\u4ef7\u683c10%\u8865\u507f\u3002")),i.a.createElement(c.a,{color:"danger"},i.a.createElement("small",null,"\u62a2\u8d2d\u603b\u91d1\u989d\u8d85\u8fc7\u5546\u54c1\u4ef7\u683c\u540e\uff0c\u7cfb\u7edf\u968f\u673a\u9009\u53d6\u4e00\u4f4d\u6210\u529f\u8005\u4f5c\u4e3a\u4e70\u5bb6\uff0c\u4e70\u5bb6\u7ee7\u7eed\u652f\u4ed8\u4e00\u6298\u4ef7\u683c\u540e\u5356\u5bb6\u53d1\u8d27\u3002\u672a\u6210\u529f\u8005\u81ea\u52a8\u9000\u56de\u62a2\u8d2d\u91d1\u989d\u3002"))),i.a.createElement(c.s,null,this.renderdialogMsg())),i.a.createElement(c.E,null,i.a.createElement(c.e,{color:"danger",onClick:this.toggleJoin.bind(this)},"Cancel(\u53d6\u6d88)"),this.renderActionButton())):null}},{key:"renderActionButton",value:function(){return this.state.success?null:i.a.createElement(c.e,{color:"danger",onClick:this.doJoin.bind(this)},"Publish(\u62a2\u8d2d)")}},{key:"renderJoinButton",value:function(e){var t=this,a=P(e.status);return e.status>2||e.closed?i.a.createElement(c.e,{size:"sm",className:"btn-tumblr btn-brand mr-1 mb-1",onClick:function(a){return t.showDetailDialog(e)}},i.a.createElement("i",{className:"fa fa-tumblr"}),i.a.createElement("span",null,a)):i.a.createElement(c.e,{size:"sm",className:"btn-html5 btn-brand mr-1 mb-1",onClick:function(a){return t.joinProduct(e)}},i.a.createElement("i",{className:"fa fa-html5"}),i.a.createElement("span",null,"Join(\u4e00\u6298\u62a2\u8d2d)"))}},{key:"renderProductList",value:function(){var e=this,t=this.state.list;return t?t.map(function(t){var a=new Date;a.setTime(t.createTime);a.toLocaleString();return i.a.createElement("tr",null,i.a.createElement("td",null,e.renderJoinButton(t)),i.a.createElement("td",null,i.a.createElement("a",{href:"#",onClick:function(a){return e.showDetailDialog(t)}},i.a.createElement("span",null,t.title))),i.a.createElement("td",null,i.a.createElement(E.a,{id:"pic"+t.productId,title:"\u5356\u5bb6\u5305\u90ae\u539f\u4ef7:"+t.price+"BTB",text:t.price/10+"\u5143",content:"\u62a2\u8d2d\u4ef7\u683c\u4e3a"+t.price/10+"BTB\uff08\u62a2\u8d2d\u4e0d\u6210\u529f\u5168\u90e8\u9000\u6b3e\uff09.\u6bcf\u4e2aBTB\u56fa\u5b9a\u4e00\u5143\u4eba\u6c11\u5e01"})),i.a.createElement("td",null,i.a.createElement(E.a,{id:"ta"+t.productId,text:t.amout+"BTB",content:"\u62a2\u8d2d\u603b\u91d1\u989d\u5927\u4e8e\u5546\u54c1\u4ef7\u683c3\u5c0f\u65f6\u540e\u505c\u6b62\u62a2\u8d2d\u3002\u7cfb\u7edf\u968f\u673a\u9009\u53d6\u4e00\u540d\u6210\u529f\u8005\uff0c\u5e76\u81ea\u52a8\u9000\u6b3e\u7ed9\u62a2\u8d2d\u672a\u6210\u529f\u8005\u3002\u6210\u529f\u8005\u652f\u4ed810%\u4ef7\u683c\u540e\u5356\u5bb6\u53d1\u8d27\u3002\u7cfb\u7edf\u8865\u507f\u5356\u5bb690%\u5dee\u4ef7\u3002"})),i.a.createElement("td",null,i.a.createElement(O,{product:t})))}):null}},{key:"renderList",value:function(){var e=this;return this.state.list?i.a.createElement(c.Q,null,i.a.createElement(c.k,null,i.a.createElement(c.g,null,i.a.createElement(c.h,null,i.a.createElement(c.u,null,i.a.createElement(c.t,{placeholder:"search (\u8f93\u5165\u5173\u952e\u5b57\u641c\u7d22)",onChange:this.upateFilterValue.bind(this)}),i.a.createElement(c.e,{color:"primary",onClick:function(t){return e.filterBlocks()}},i.a.createElement("i",{className:"fa fa-search"}),"\xa0")),i.a.createElement(c.T,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Join(\u62a2\u8d2d)"),i.a.createElement("th",null,"Title(\u540d\u79f0)"),i.a.createElement("th",null,"Price(\u62a2\u8d2d\u4ef7)"),i.a.createElement("th",null,"Joined(\u62a2\u8d2d\u91d1\u989d)"),i.a.createElement("th",null,"Link(\u5206\u4eab\u94fe\u63a5)"))),i.a.createElement("tbody",null,this.renderProductList())),this.rederAddProductDialog(),this.rederJoinProductDialog(),this.renderProductDetailDialog(),i.a.createElement("nav",null,i.a.createElement(c.J,null,i.a.createElement(c.K,null,i.a.createElement(c.L,{previous:!0,tag:"button",onClick:function(t){e.prePage()}},"Prev(\u4e0a\u4e00\u9875)")),i.a.createElement(c.K,{active:!0},i.a.createElement(c.L,{tag:"button"},this.state.page)),i.a.createElement(c.K,null,i.a.createElement(c.L,{next:!0,tag:"button",onClick:function(t){e.nextPage()}},"Next(\u4e0b\u4e00\u9875)")))),i.a.createElement(c.e,{onClick:function(t){e.togglePublishProduct()},className:"btn-openid btn-brand"},i.a.createElement("i",{className:"fa fa-openid"}),i.a.createElement("span",null,"Sell(\u51fa\u552e\u6211\u7684\u7269\u54c1)")))))):null}},{key:"onTabClicked",value:function(e){if(this.state.activeTab!==e){this.setState({activeTab:e});var t=0;this.state.account&&(t=this.state.account.aid),T(this.onProductList.bind(this),1,e,t+"")}}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"animated fadeIn"},i.a.createElement(c.G,{tabs:!0},i.a.createElement(c.H,null,i.a.createElement(c.I,{className:d()({active:"0"===this.state.activeTab}),onClick:function(){e.onTabClicked("0")}},i.a.createElement("i",{className:"icon-calculator"})," ",i.a.createElement("span",{className:"0"===this.state.activeTab?"":"d-none"}," All(\u4e00\u6298\u62a2\u8d2d) "),"\xa0",i.a.createElement(c.b,{color:"success"},"All(\u5168\u90e8\u7269\u54c1) "))),i.a.createElement(c.H,null,i.a.createElement(c.I,{className:d()({active:"1"===this.state.activeTab}),onClick:function(){e.onTabClicked("1")}},i.a.createElement("i",{className:"icon-basket-loaded"})," ",i.a.createElement("span",{className:"1"===this.state.activeTab?"":"d-none"},"Lucky(\u62fc\u624b\u6c14)"),"\xa0",i.a.createElement(c.b,{pill:!0,color:"danger"},"Shopping Cart(\u6211\u7684\u62a2\u8d2d)"))),i.a.createElement(c.H,null,i.a.createElement(c.I,{className:d()({active:"2"===this.state.activeTab}),onClick:function(){e.onTabClicked("2")}},i.a.createElement("i",{className:"icon-pie-chart"})," ",i.a.createElement("span",{className:"2"===this.state.activeTab?"":"d-none"},"I'am Boss(\u6211\u662f\u5356\u5bb6)"),i.a.createElement(c.b,{pill:!0,color:"info"},"Mine(\u6211\u7684\u7269\u54c1)"))),i.a.createElement(c.H,null,i.a.createElement(c.I,{className:d()({active:"3"===this.state.activeTab}),onClick:function(){e.onTabClicked("3")}},i.a.createElement("i",{className:"icon-pie-chart"})," ",i.a.createElement("span",{className:"3"===this.state.activeTab?"":"d-none"},"Vote(\u6211\u8981\u6295\u7968)"),i.a.createElement(c.b,{pill:!0,color:"warning"},"Issues(\u7ea0\u7eb7\u4ea4\u6613)")))),this.renderList())}}]),a}(r.Component),O=function(e){function t(e){n(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.toggle=a.toggle.bind(a),a.state={popoverOpen:!1},a}return s(t,e),y(t,[{key:"toggle",value:function(){this.setState({popoverOpen:!this.state.popoverOpen})}},{key:"renderSteps",value:function(){var e="steps-"+this.props.product.transactionId,t="";if(this.props.product.steps){t=this.props.product.steps.split(";").map(function(e,t){var a=void 0;return e&&e.length>0&&(a=P(e)),a?i.a.createElement(c.z,null,t+1+"."+a):null})}var a=w(this.props.product.status);return a&&(a="Next(\u4e0b\u4e00\u6b65)-> "+a),i.a.createElement("span",null,i.a.createElement(c.a,{id:e,onClick:this.toggle},i.a.createElement("small",null," Status(\u5f53\u524d\u72b6\u6001) : ",P(this.props.product.status),"  ")," "),i.a.createElement(c.a,{onClick:this.toggle},i.a.createElement("small",null," ",a," ")," "),i.a.createElement(c.M,{placement:"top",isOpen:this.state.popoverOpen,target:e,toggle:this.toggle},i.a.createElement(c.O,null,"Status(\u72b6\u6001\u5217\u8868)"),i.a.createElement(c.N,null,t)))}},{key:"render",value:function(){if("step"===this.props.mode)return i.a.createElement(c.y,{size:"sm"},this.renderSteps());var e="Popover-"+this.props.product.transactionId,t=Object(o.getCurrentHost)()+"/#/bshop/product-list#"+this.props.product.transactionId+"#"+this.props.product.title+" "+this.props.product.price/10+"\u5143\u62a2\u8d2d.7\u5929\u65e0\u7406\u7531\u9000\u8d27";return i.a.createElement("span",null,i.a.createElement("span",{className:"alert-primary  fade show",id:e,onClick:this.toggle},"\u9080\u8bf7\u597d\u53cb\u62a2\u8d2d"),i.a.createElement(c.M,{placement:"top",isOpen:this.state.popoverOpen,target:e,toggle:this.toggle},i.a.createElement(c.O,null,"Share Link(\u5206\u4eab\u8fd9\u4e2a\u5546\u54c1\u7684\u94fe\u63a5)"),i.a.createElement(c.N,null,t)))}}]),t}(r.Component);t.default=j}.call(t,a(2).Buffer)},826:function(e,t,a){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=a(1),i=a.n(r),c=a(8),o=a(43),u=(a.n(o),a(11)),d=(a.n(u),a(32)),p=(a.n(d),a(110)),h=a(109),m=a(267),g=a(156),E=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=a(43),v=(f.loadProductList,f.doBShopTransaction),b=f.getIssueReason,y=(f.loadProductDetails,f.loadIssueTransactions),k=f.shareDecrypt,T=f.shareEncrypt,C=f.loadEncryptedInfo,S=(Object(d.getShareHost)(),a(42),function(t){function a(e){n(this,a);var t=l(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={product:t.props.product,productDetail:t.props.productDetail,winner:t.props.winner,paying:!1,confirm:!1,day7refund:!1,issue:!1,drop:!1,selectIssueAction:!1,selectActionTitle:"Select(\u9009\u62e9\u7ea0\u7eb7\u64cd\u4f5c\u7c7b\u578b)",issueReason:0,issues:[],issuePage:1,renderDesposit:!1},t.fee="1",t.deadline=5,t}return s(a,t),E(a,[{key:"componentDidMount",value:function(){var e=Object(d.loadLocalAccount)();e&&e.secret&&(this.secret=e.secret,this.account=e)}},{key:"onSecret",value:function(e){if(e){this.secret=e;var t=Object(d.calcAccountId)(this.userSec);this.setState({rsId:t})}}},{key:"togglePay10p",value:function(){this.setState({paying:!this.state.paying,dialogMsg:""})}},{key:"pay10P",value:function(){this.togglePay10p()}},{key:"toggleDrop",value:function(){this.setState({drop:!this.state.drop,dialogMsg:""})}},{key:"toggleDecrypt",value:function(){var e=this;!this.state.decrypt&&this.account?C(this.state.product,this.account.rsId,function(t,a){t&&a&&e.setState({infoBlocks:a})}.bind(this)):this.setState({decrypted:null});var t="";this.account||(t="\u672a\u767b\u5f55"),this.setState({decrypt:!this.state.decrypt,dialogMsg:t})}},{key:"toggleSending",value:function(){this.setState({sending:!this.state.sending,dialogMsg:""})}},{key:"toggleIssue",value:function(){this.setState({issue:!this.state.issue,dialogMsg:""})}},{key:"toggleVotes",value:function(){var e=this;this.state.votes||y(this.state.product,this.state.issuePage,6,function(t,a){t&&a&&e.setState({issues:a})}),this.setState({votes:!this.state.votes,dialogMsg:""})}},{key:"toggleRejectConfirm",value:function(){this.setState({rejectConfirm:!this.state.rejectConfirm,dialogMsg:""})}},{key:"toggle7dayRefund",value:function(){this.setState({day7refund:!this.state.day7refund,dialogMsg:""})}},{key:"renderActionButtons",value:function(){var e=this.state.product.status;return 3==e?i.a.createElement("div",null,i.a.createElement(c.e,{color:"danger",onClick:this.pay10P.bind(this)},"Pay(\u4e70\u5bb6\u652f\u4ed8)"),i.a.createElement(c.e,{color:"danger",onClick:this.toggleDrop.bind(this)},"Drop(\u4e70\u5bb6\u653e\u5f03)")):4==e?i.a.createElement("div",null,i.a.createElement(c.e,{color:"danger",onClick:this.toggleDecrypt.bind(this)},"Decrypt(\u89e3\u5bc6\u4e70\u5bb6\u5730\u5740)"),i.a.createElement(c.e,{color:"danger",onClick:this.toggleSending.bind(this)},"Deliver(\u5356\u5bb6\u53d1\u8d27)")):5==e?i.a.createElement("div",null,i.a.createElement(c.e,{color:"danger",onClick:this.toggleDecrypt.bind(this)},"Decrypt(\u89e3\u5bc6\u53d1\u8d27\u4fe1\u606f)"),i.a.createElement(c.e,{color:"danger",onClick:this.toggleConfirm.bind(this)},"Confirme(\u4e70\u5bb6\u786e\u8ba4\u6536\u8d27)"),i.a.createElement(c.e,{color:"danger",onClick:this.toggle7dayRefund.bind(this)},"Refund(7\u5929\u65e0\u7406\u7531\u9000\u8d27)"),i.a.createElement(c.e,{color:"danger",onClick:this.toggleIssue.bind(this)},"Issue(\u672a\u6536\u5230\u8d27\u7ea0\u7eb7)")):6==e?i.a.createElement("div",null,i.a.createElement(c.e,{color:"danger",onClick:this.toggleRejectConfirm.bind(this)},"Confirme(\u5356\u5bb6\u786e\u8ba4\u9000\u8d27)"),i.a.createElement(c.e,{color:"danger",onClick:this.toggleIssue.bind(this)},"Issue(\u672a\u6536\u5230\u9000\u8d27\u7ea0\u7eb7)")):10==e?i.a.createElement("div",null,i.a.createElement(c.e,{color:"danger",onClick:this.toggleVotes.bind(this)},"Votes(\u67e5\u770b\u6295\u7968\u5217\u8868)"),i.a.createElement(c.e,{color:"danger",onClick:this.toggleIssue.bind(this)},"Issue Vote(\u7ea0\u7eb7\u6295\u7968)"),i.a.createElement(c.e,{color:"danger",onClick:this.toggleConfirm.bind(this)},"Confirme(\u4e70\u5bb6\u786e\u8ba4\u6536\u8d27)"),i.a.createElement(c.e,{color:"danger",onClick:this.toggleRejectConfirm.bind(this)},"Confirme(\u5356\u5bb6\u786e\u8ba4\u9000\u8d27)")):null}},{key:"updateFee",value:function(e){e&&e.target&&(this.fee=e.target.value,0==this.fee.length&&(this.fee=1))}},{key:"updateSellerRefund",value:function(e){e&&e.target&&(this.sellerRefund=e.target.value)}},{key:"updateIssueNote",value:function(e){e&&e.target&&(this.issueNote=e.target.value)}},{key:"updateBuyerRefund",value:function(e){e&&e.target&&(this.buyerRefund=e.target.value)}},{key:"updateDeadline",value:function(e){e&&e.target&&(this.deadline=e.target.value,0==this.deadline.length&&(this.deadline=5))}},{key:"updateAddress",value:function(e){e&&e.target&&(this.address=e.target.value,this.updateAddressBlock())}},{key:"updateProductAddress",value:function(e){e&&e.target&&(this.address=e.target.value)}},{key:"updateContact",value:function(e){e&&e.target&&(this.contact=e.target.value,this.updateAddressBlock())}},{key:"updatePhone",value:function(e){e&&e.target&&(this.phone=e.target.value,this.updateAddressBlock())}},{key:"updateAddressBlock",value:function(){var e={contact:this.contact,address:this.address,phone:this.phone};e=JSON.stringify(e);var t=this.state.productDetail.seller,a=Object(d.simpleHash)(e),n=T(this.secret,t,this.state.product.transactionId,e);this.setState({addressBlock:n,addressHash:a})}},{key:"updateTracking",value:function(e){if(e&&e.target){var t=e.target.value,a=Object(d.simpleHash)(t),n=this.state.productDetail.winner.pk,l=T(this.secret,n,this.state.product.transactionId,t);this.setState({trackingBlock:l,trackingHash:a})}}},{key:"debug",value:function(){var e=k(this.secret,"","","");console.log(e)}},{key:"renderdialogMsg",value:function(){return this.state.renderDesposit?i.a.createElement("div",null,i.a.createElement(c.x,null,this.state.dialogMsg),i.a.createElement(g.a,null)):this.state.dialogMsg?i.a.createElement(c.x,null,this.state.dialogMsg):null}},{key:"doPaying",value:function(){var e=this,t=this.state.product.transactionId,a=Object(d.createPeerId)(this.secret),n=this.state.product.price/10,l=this.state.addressHash,s=this.state.addressBlock,r={action:"transaction",type:"sAccept",amount:n+"",hash:l,fee:this.fee,dealine:this.deadline,sid:t,pk:a.pk,accountId:a.aid,addressBlock:s};v(this.secret,r,function(t,a){t&&a&&a.ok?(Object(d.saveUserSec)(e.secret),e.setState({dialogMsg:"success(\u6210\u529f),\u7b49\u5f85\u77ff\u5de5\u9a8c\u8bc1(\u5927\u7ea6\u4e00\u5206\u949f)",success:!0})):a&&!a.ok&&"1001"===a.code?e.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002",renderDesposit:!0}):e.setState({dialogMsg:"err(\u5931\u8d25)"})}.bind(this))}},{key:"do7dayrefund",value:function(){var t=this,a=this.state.product.transactionId,n=Object(d.createPeerId)(this.secret),l=this.state.trackingBlock;l=new e(l).toString("base64");var s={action:"transaction",type:"sAction",hash:"",info:l,accountId:n.aid,fee:this.fee,dealine:this.deadline,sid:a,saction:"20"};v(this.secret,s,function(e,a){e&&a&&a.ok?(Object(d.saveUserSec)(t.secret),t.setState({dialogMsg:"success(\u6210\u529f),\u7b49\u5f85\u77ff\u5de5\u9a8c\u8bc1(\u5927\u7ea6\u4e00\u5206\u949f)",success:!0})):a&&!a.ok&&"1001"===a.code?t.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002",renderDesposit:!0}):t.setState({dialogMsg:"err(\u5931\u8d25)"})}.bind(this))}},{key:"doDrop",value:function(){var e=this,t=this.state.product.transactionId,a=Object(d.createPeerId)(this.secret),n={action:"transaction",type:"sAction",hash:"0",accountId:a.aid,fee:this.fee,dealine:this.deadline,sid:t,saction:"4"};v(this.secret,n,function(t,a){t&&a&&a.ok?(Object(d.saveUserSec)(e.secret),e.setState({dialogMsg:"success(\u6210\u529f),\u7b49\u5f85\u77ff\u5de5\u9a8c\u8bc1(\u5927\u7ea6\u4e00\u5206\u949f)",success:!0})):a&&!a.ok&&"1001"===a.code?e.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002",renderDesposit:!0}):e.setState({dialogMsg:"err(\u5931\u8d25)"})}.bind(this))}},{key:"doIssue",value:function(){var t=this;if(0==this.state.issueReason)return void this.setState({dialogMsg:"Choose(\u8bf7\u9009\u62e9\u64cd\u4f5c\u7c7b\u578b)"});var a=this.state.product.transactionId,n=Object(d.createPeerId)(this.secret),l=this.state.issueReason,s=this.buyerRefund,r=this.sellerRefund,i=this.issueNote,c=0;i&&i.length>0&&(c=Object(d.simpleHash)(i),i=new e(i).toString("base64"));var o={action:"transaction",type:"issue",hash:c,info:i,pk:n.pk,fee:this.fee,dealine:this.deadline,sid:a,reason:l,wp:s,sp:r};v(this.secret,o,function(e,a){e&&a&&a.ok?(Object(d.saveUserSec)(t.secret),t.setState({dialogMsg:"success(\u6210\u529f),\u7b49\u5f85\u77ff\u5de5\u9a8c\u8bc1(\u5927\u7ea6\u4e00\u5206\u949f)",success:!0})):a&&!a.ok&&"1001"===a.code?t.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002",renderDesposit:!0}):t.setState({dialogMsg:"err(\u5931\u8d25)"})}.bind(this))}},{key:"doRejectConfirm",value:function(){var e=this,t=this.state.product.transactionId,a=Object(d.createPeerId)(this.secret),n={action:"transaction",type:"sAction",accountId:a.aid,fee:this.fee,dealine:this.deadline,sid:t,saction:"21"};v(this.secret,n,function(t,a){t&&a&&a.ok?(Object(d.saveUserSec)(e.secret),e.setState({dialogMsg:"success(\u6210\u529f),\u7b49\u5f85\u77ff\u5de5\u9a8c\u8bc1(\u5927\u7ea6\u4e00\u5206\u949f)",success:!0})):a&&!a.ok&&"1001"===a.code?e.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002",renderDesposit:!0}):a&&!a.ok&&"1001"===a.code?e.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002",renderDesposit:!0}):e.setState({dialogMsg:"err(\u5931\u8d25)"})}.bind(this))}},{key:"doSending",value:function(){var t=this,a=this.state.product.transactionId,n=Object(d.createPeerId)(this.secret),l=this.state.trackingBlock,s=this.state.trackingHash;l=new e(l).toString("base64");var r={action:"transaction",type:"sAction",accountId:n.aid,fee:this.fee,dealine:this.deadline,sid:a,saction:"2",info:l,hash:s};v(this.secret,r,function(e,a){e&&a&&a.ok?(Object(d.saveUserSec)(t.secret),t.setState({dialogMsg:"success(\u6210\u529f),\u7b49\u5f85\u77ff\u5de5\u9a8c\u8bc1(\u5927\u7ea6\u4e00\u5206\u949f)",success:!0})):a&&!a.ok&&"1001"===a.code?t.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002",renderDesposit:!0}):t.setState({dialogMsg:"err(\u5931\u8d25)"})}.bind(this))}},{key:"doWinnerConfirm",value:function(){var e=this,t=this.state.product.transactionId,a=Object(d.createPeerId)(this.secret),n={action:"transaction",type:"sAction",accountId:a.aid,fee:this.fee,dealine:this.deadline,sid:t,saction:"3"};v(this.secret,n,function(t,a){t&&a&&a.ok?(Object(d.saveUserSec)(e.secret),e.setState({dialogMsg:"success(\u6210\u529f),\u7b49\u5f85\u77ff\u5de5\u9a8c\u8bc1(\u5927\u7ea6\u4e00\u5206\u949f)",success:!0})):a&&!a.ok&&"1001"===a.code?e.setState({dialogMsg:"\u8d26\u6237\u4f59\u989d\u4e0d\u8db3\u3002",renderDesposit:!0}):e.setState({dialogMsg:"err(\u5931\u8d25)"})}.bind(this))}},{key:"toggleConfirm",value:function(){this.setState({confirm:!this.state.confirm,dialogMsg:""})}},{key:"renderDropDialog",value:function(){var e=this.state.winner.accountId;return i.a.createElement(c.C,{isOpen:this.state.drop,toggle:this.toggleDrop.bind(this),className:"modal-info "+this.props.className},i.a.createElement(c.F,{toggle:this.toggleDrop.bind(this)},e," Drop(\u653e\u5f03\u4ea4\u6613)"),i.a.createElement(c.D,null,i.a.createElement("p",null,"Name (\u7269\u54c1)\uff1a ",this.state.product.title),i.a.createElement("p",null,"Price(\u5356\u5bb6\u539f\u4ef7)\uff1a",this.state.product.price," BTB"),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,null,i.a.createElement(p.a,{onSecret:this.onSecret.bind(this)})))),this.renderFeeAndDeadline(),i.a.createElement(c.s,null,i.a.createElement(c.a,{color:"danger"},i.a.createElement("small",null,"\u4e70\u5bb6\u653e\u5f03\u540e\u8d26\u6237\u81ea\u52a8\u9000\u56de\u62a2\u8d2d\u91d1\u989d\u5e76\u83b7\u5f97\u5546\u54c1\u91d1\u989d\u768410%\u8865\u507f,\u5356\u5bb6\u9000\u56de\u4fdd\u8bc1\u91d1\u548c\u8865\u507f\u5546\u54c1\u91d1\u989d\u768410%"))),i.a.createElement(c.s,null,this.renderdialogMsg())),i.a.createElement(c.E,null,i.a.createElement(c.e,{color:"danger",onClick:this.toggleDrop.bind(this)},"Cancel(\u53d6\u6d88)"),i.a.createElement(c.e,{color:"danger",hidden:this.state.success,onClick:this.doDrop.bind(this)},"Drop(\u786e\u8ba4\u653e\u5f03)")))}},{key:"renderRejectConfirmDialog",value:function(){var e=this.state.product.senderId;return i.a.createElement(c.C,{isOpen:this.state.rejectConfirm,toggle:this.toggleRejectConfirm.bind(this),className:"modal-info "+this.props.className},i.a.createElement(c.F,{toggle:this.toggleRejectConfirm.bind(this)},e," Confirm(\u786e\u8ba4\u6536\u5230\u9000\u8d27)"),i.a.createElement(c.D,null,i.a.createElement("p",null,"Name (\u7269\u54c1)\uff1a ",this.state.product.title),i.a.createElement("p",null,"Price(\u5356\u5bb6\u539f\u4ef7)\uff1a",this.state.product.price," BTB"),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,null,i.a.createElement(p.a,{onSecret:this.onSecret.bind(this)})))),this.renderFeeAndDeadline(),i.a.createElement(c.s,null,i.a.createElement(c.a,{color:"danger"},i.a.createElement("small",null,"\u786e\u8ba4\u540e\u5356\u5bb6\u5c06\u7acb\u5373\u6536\u5230\u4fdd\u8bc1\u91d1\u548c\u5546\u54c1\u4ef7\u683c10%\u8865\u507f,\u4e70\u5bb6\u9000\u5546\u54c1\u4ef7\u683c10%\u9000\u6b3e\u3002\u4ea4\u6613\u7ed3\u675f.\u53cc\u65b9\u53ef\u4ee5\u5bf9\u4ea4\u6613\u8bc4\u4ef7"))),i.a.createElement(c.s,null,this.renderdialogMsg())),i.a.createElement(c.E,null,i.a.createElement(c.e,{color:"danger",onClick:this.toggleRejectConfirm.bind(this)},"Cancel(\u53d6\u6d88)"),i.a.createElement(c.e,{color:"danger",hidden:this.state.success,onClick:this.doRejectConfirm.bind(this)},"Confirmed(\u786e\u8ba4\u9000\u8d27)")))}},{key:"renderIssueTransactions",value:function(){var t=this.state.issues;return t?t.map(function(t){var a=new Date;a.setTime(t.time);var n=a.toLocaleString();return i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(h.a,{rsId:t.from})),i.a.createElement("td",null,t.wp,"%"),i.a.createElement("td",null,t.sp,"%"),i.a.createElement("td",null,t.fee),i.a.createElement("td",null,new e(t.info,"base64").toString()),i.a.createElement("td",null,n))}.bind(this)):null}},{key:"renderIssueVotes",value:function(){var e=this,t=this.state.winner.accountId,a=this.state.product.senderId;return i.a.createElement(c.C,{isOpen:this.state.votes,toggle:this.toggleVotes.bind(this),className:"modal-info "+this.props.className},i.a.createElement(c.F,{toggle:this.toggleVotes.bind(this)},"Votes(\u7ea0\u7eb7\u6295\u7968\u5217\u8868)"),i.a.createElement(c.D,null,i.a.createElement("p",null,"Name (\u7269\u54c1)\uff1a ",this.state.product.title),i.a.createElement("p",null,"Price(\u5356\u5bb6\u539f\u4ef7)\uff1a",this.state.product.price," BTB"),i.a.createElement("p",null,"Seller(\u5356\u5bb6\u8d26\u53f7)\uff1a",i.a.createElement(h.a,{rsId:a})),i.a.createElement("p",null,"Winner(\u4e70\u5bb6\u8d26\u53f7)\uff1a",i.a.createElement(h.a,{rsId:t})),i.a.createElement("p",null,"Issue(\u7ea0\u7eb7\u539f\u56e0)\uff1a",b(this.state.product.issueReason)),i.a.createElement(c.T,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Account(\u8d26\u6237)"),i.a.createElement("th",null,"Buyer(\u4e70\u5bb6%)"),i.a.createElement("th",null,"Seller(\u5356\u5bb6%)"),i.a.createElement("th",null,"Fee(\u77ff\u5de5\u8d39)"),i.a.createElement("th",null,"Note(\u8bf4\u660e)"),i.a.createElement("th",null,"Time(\u65f6\u95f4)"))),i.a.createElement("tbody",null,this.renderIssueTransactions()),i.a.createElement(c.J,null,i.a.createElement(c.K,null,i.a.createElement(c.L,{previous:!0,tag:"button",onClick:function(t){e.preIssuePage()}},"-")),i.a.createElement(c.K,{active:!0},i.a.createElement(c.L,{tag:"button"},this.state.issuePage)),i.a.createElement(c.K,null,i.a.createElement(c.L,{next:!0,tag:"button",onClick:function(t){e.nextIssuePage()}},"+"))))),i.a.createElement(c.E,null,i.a.createElement(c.e,{color:"danger",onClick:this.toggleVotes.bind(this)},"Cancel(\u53d6\u6d88)"),i.a.createElement(c.e,{color:"danger",hidden:this.state.success,onClick:this.toggleIssue.bind(this)},"Vote(\u6295\u7968)")))}},{key:"preIssuePage",value:function(){var e=this;this.state.issuePage--,y(this.state.product,this.state.issuePage,6,function(t,a){t&&a&&e.setState({issues:a})})}},{key:"nextIssuePage",value:function(){var e=this;this.state.issuePage++,y(this.state.product,this.state.issuePage,6,function(t,a){t&&a&&e.setState({issues:a})})}},{key:"renderWinnerConfirmedProductDialog",value:function(){var e=this.state.winner.accountId;return i.a.createElement(c.C,{isOpen:this.state.confirm,toggle:this.toggleConfirm.bind(this),className:"modal-info "+this.props.className},i.a.createElement(c.F,{toggle:this.toggleConfirm.bind(this)},e," Confirm(\u786e\u8ba4\u6536\u8d27)"),i.a.createElement(c.D,null,i.a.createElement("p",null,"Name (\u7269\u54c1)\uff1a ",this.state.product.title),i.a.createElement("p",null,"Price(\u5356\u5bb6\u539f\u4ef7)\uff1a",this.state.product.price," BTB"),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,null,i.a.createElement(p.a,{onSecret:this.onSecret.bind(this)})))),this.renderFeeAndDeadline(),i.a.createElement(c.s,null,i.a.createElement(c.a,{color:"danger"},i.a.createElement("small",null,"\u786e\u8ba4\u540e\u5356\u5bb6\u5c06\u7acb\u5373\u6536\u5230\u8d27\u6b3e\u3002\u4ea4\u6613\u7ed3\u675f.\u53cc\u65b9\u53ef\u4ee5\u5bf9\u4ea4\u6613\u8bc4\u4ef7"))),i.a.createElement(c.s,null,this.renderdialogMsg())),i.a.createElement(c.E,null,i.a.createElement(c.e,{color:"danger",onClick:this.toggleConfirm.bind(this)},"Cancel(\u53d6\u6d88)"),i.a.createElement(c.e,{color:"danger",hidden:this.state.success,onClick:this.doWinnerConfirm.bind(this)},"Confirmed(\u786e\u8ba4\u6536\u8d27)")))}},{key:"renderIssueDialog",value:function(){var e=this,t=this.state.winner.accountId,a=this.state.product.senderId,n=this.state.product.price+" + "+this.state.product.guarantee,l="\u6211\u662f\u4e70\u5bb6\u672a\u6536\u5230\u8d27",s="\u6211\u662f\u5356\u5bb6\u672a\u6536\u5230\u9000\u8d27",r="\u6211\u8981\u6295\u7968\u89e3\u51b3\u7ea0\u7eb7";return i.a.createElement(c.C,{isOpen:this.state.issue,toggle:this.toggleIssue.bind(this),className:"modal-info "+this.props.className},i.a.createElement(c.F,{toggle:this.toggleIssue.bind(this)},"Issue(\u4ea4\u6613\u7ea0\u7eb7)"),i.a.createElement(c.D,null,i.a.createElement("p",null,"Name (\u7269\u54c1)\uff1a ",this.state.product.title),i.a.createElement("p",null,"Price(\u5356\u5bb6\u539f\u4ef7)\uff1a",this.state.product.price," BTB"),i.a.createElement("p",null,"Price(\u5356\u5bb6\u4fdd\u8bc1\u91d1)\uff1a",this.state.product.guarantee," BTB"),i.a.createElement("p",null,"Seller(\u5356\u5bb6\u8d26\u53f7)\uff1a",i.a.createElement(h.a,{rsId:a})),i.a.createElement("p",null,"Winner(\u4e70\u5bb6\u8d26\u53f7)\uff1a",i.a.createElement(h.a,{rsId:t})),i.a.createElement("p",null,"Issue(\u7ea0\u7eb7\u539f\u56e0)\uff1a",b(this.state.product.issueReason)),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,null,i.a.createElement(p.a,{onSecret:this.onSecret.bind(this)})))),i.a.createElement(c.s,null,i.a.createElement(c.n,{isOpen:this.state.selectIssueAction,toggle:function(){e.setState({selectIssueAction:!e.state.selectIssueAction})}.bind(this)},i.a.createElement(c.q,{caret:!0},this.state.selectActionTitle),i.a.createElement(c.p,null,i.a.createElement(c.o,{onClick:function(){e.setState({selectActionTitle:l,issueReason:1})}.bind(this)},l),i.a.createElement(c.o,{onClick:function(){e.setState({selectActionTitle:s,issueReason:2})}.bind(this)},s),i.a.createElement(c.o,{onClick:function(){e.setState({selectActionTitle:r,issueReason:3})}.bind(this)},r))),i.a.createElement(c.x,{htmlFor:"appendedInputButtons"},"(\u4ea4\u6613\u7ea0\u7eb7\u91d1\u989d ",n," \u768490%\u5206\u914d\u7ed9\u4e70\u5356\u53cc\u65b9\uff0c10%\u7559\u505a\u6295\u7968\u5956\u52b1):"),i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,"Seller(\u5356\u5bb6\u5e94\u9000\u6b3e):")),i.a.createElement(c.t,{id:"appendedPrependedInput",size:"16",type:"text",onChange:this.updateSellerRefund.bind(this),placeholder:"\u5356\u5bb6\u5e94\u8be5\u83b7\u5f97\u9000\u6b3e"}),i.a.createElement(c.v,{addonType:"append"},i.a.createElement(c.w,null,"%(\u767e\u5206\u6bd4)"))),i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,"Buyer(\u4e70\u5bb6\u5e94\u9000\u6b3e):")),i.a.createElement(c.t,{id:"appendedPrependedInput",size:"16",type:"text",onChange:this.updateBuyerRefund.bind(this),placeholder:"\u4e70\u5bb6\u5e94\u8be5\u83b7\u5f97\u9000\u6b3e"}),i.a.createElement(c.v,{addonType:"append"},i.a.createElement(c.w,null,"%(\u767e\u5206\u6bd4)"))))),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,"note(\u8bf4\u660e):")),i.a.createElement(c.t,{type:"textarea",name:"textarea-input",id:"textarea-input",rows:"3",onChange:this.updateIssueNote.bind(this),placeholder:"\u7ea0\u7eb7\u610f\u89c1\u7b80\u5355\u63cf\u8ff0"})))),this.renderFeeAndDeadline(),i.a.createElement(c.s,null,i.a.createElement(c.a,{color:"danger"},i.a.createElement("small",null,"\u4ea4\u6613\u7ea0\u7eb7\u4fe1\u606f\u5c06\u516c\u5f00\uff0c\u6240\u6709\u8d26\u6237\u90fd\u53ef\u4ee5\u6295\u7968\u5e2e\u52a9\u89e3\u51b3\u7ea0\u7eb7\u3002")),i.a.createElement(c.a,{color:"danger"},i.a.createElement("small",null,"\u7cfb\u7edf\u968f\u673a\u9009\u62e9\u4e00\u6279\u6295\u7968\u7ed3\u679c\u8ba1\u7b97\u6700\u7ec8\u4ef2\u88c1\u7ed3\u679c\uff0c\u81ea\u52a8\u7ed9\u53cc\u65b9\u9000\u6b3e\u3002\u540c\u65f6\u5bf9\u4e8e\u6700\u63a5\u8fd1\u968f\u673a\u7ed3\u679c\u7684\u6295\u7968\u8d26\u6237\uff0c\u81ea\u52a8\u53d1\u653e\u7ea0\u7eb7\u91d1\u989d\u768410%\u4f5c\u4e3a\u5956\u52b1\u3002"))),i.a.createElement(c.s,null,this.renderdialogMsg())),i.a.createElement(c.E,null,i.a.createElement(c.e,{color:"danger",onClick:this.toggleIssue.bind(this)},"Cancel(\u53d6\u6d88)"),i.a.createElement(c.e,{color:"danger",hidden:this.state.success,onClick:this.doIssue.bind(this)},"Sent(\u53d1\u5e03)")))}},{key:"renderWinner7dayRefundDialog",value:function(){var e=this.state.winner.accountId;return i.a.createElement(c.C,{isOpen:this.state.day7refund,toggle:this.toggle7dayRefund.bind(this),className:"modal-info "+this.props.className},i.a.createElement(c.F,{toggle:this.toggle7dayRefund.bind(this)},e," - Reject(7\u5929\u65e0\u7406\u7531\u9000\u8d27)"),i.a.createElement(c.D,null,i.a.createElement("p",null,"Name (\u7269\u54c1)\uff1a ",this.state.product.title),i.a.createElement("p",null,"Price(\u5356\u5bb6\u539f\u4ef7)\uff1a",this.state.product.price," BTB"),i.a.createElement(c.s,null,i.a.createElement(c.x,{htmlFor:"appendedInputButtons"},"Account Secret(BTB\u8d26\u6237\u5bc6\u7801):"),i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,null,i.a.createElement(p.a,{onSecret:this.onSecret.bind(this)})))),this.renderFeeAndDeadline(),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,"Tracking NO.(\u5feb\u9012\u4fe1\u606f):")),i.a.createElement(c.t,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateTracking.bind(this),placeholder:"Tracking NO.(\u5feb\u9012\u5355\u53f7):"})),i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,"Info Block(\u4fe1\u606f\u52a0\u5bc6):")),i.a.createElement(c.t,{type:"textarea",name:"textarea-input",id:"textarea-input",rows:"3",value:this.state.trackingBlock}),i.a.createElement(c.a,{color:"danger"},i.a.createElement("small",null,"\u4e70\u5bb6\u6536\u5230\u8d27\u540e\u53ef\u4ee5\u4e0e\u5356\u5bb6\u6c9f\u901a\uff0c\u7533\u8bf7\u9000\u8d27\u3002\u9000\u8d27\u5feb\u9012\u4fe1\u606f\u52a0\u5bc6\u540e\u53ea\u6709\u5356\u5bb6\u53ef\u4ee5\u89e3\u5bc6\uff0c\u4efb\u4f55\u5176\u4ed6\u4eba\u90fd\u65e0\u6cd5\u67e5\u770b"))))),i.a.createElement(c.s,null,i.a.createElement(c.a,{color:"danger"},i.a.createElement("small",null,"\u5356\u5bb6\u6536\u5230\u9000\u8d27\u540e\u786e\u8ba4\uff0c\u7cfb\u7edf\u81ea\u52a8\u7ed9\u4e70\u5bb6\u9000\u6b3e\u3002\u7cfb\u7edf\u5c06\u81ea\u52a8\u9000\u4fdd\u8bc1\u91d1\u7ed9\u5356\u5bb6\u30027\u5929\u672a\u786e\u8ba4\u7cfb\u7edf\u5c06\u81ea\u52a8\u786e\u8ba4."))),i.a.createElement(c.s,null,this.renderdialogMsg())),i.a.createElement(c.E,null,i.a.createElement(c.e,{color:"danger",onClick:this.toggle7dayRefund.bind(this)},"Cancel(\u53d6\u6d88)"),i.a.createElement(c.e,{color:"danger",hidden:this.state.success,onClick:this.do7dayrefund.bind(this)},"Reject(\u9000\u8d27)")))}},{key:"renderFeeAndDeadline",value:function(){return i.a.createElement("div",null,i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,i.a.createElement(m.a,{id:"min123",text:"Fee(\u77ff\u5de5\u624b\u7eed\u8d39):",content:"\u533a\u5757\u94fe\u77ff\u5de5\u4e3a\u8d26\u6237\u4f59\u989d\u6bd4\u8f83\u591a\u7684BTB\u8d26\u6237\uff0c\u8d1f\u8d23\u9a8c\u8bc1\u6240\u6709\u4ea4\u6613\u662f\u5426\u7b26\u5408\u89c4\u5219,\u5e76\u5c06\u5408\u6cd5\u4ea4\u6613\u4fdd\u5b58\u5230\u533a\u5757\u94fe\u3002\u77ff\u5de5\u4fdd\u8bc1\u6574\u4e2a\u7cfb\u7edf\u6309\u7167\u89c4\u5219\u8fd0\u884c\u3002\u540c\u65f6\u83b7\u5f97\u4ea4\u6613\u624b\u7eed\u8d39\u3002"}))),i.a.createElement(c.t,{id:"appendedPrependedInput",size:"16",type:"text",onChange:this.updateFee.bind(this),placeholder:"miner Fee \u533a\u5757\u94fe\u77ff\u5de5\u8d39\uff0c\u6700\u5c111\u4e2a"}),i.a.createElement(c.v,{addonType:"append"},i.a.createElement(c.w,null,"BTB"))))),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,i.a.createElement(m.a,{id:"dl4545",text:"Deadline(\u6709\u6548\u671f):",content:"\u77ff\u5de5\u9a8c\u8bc1\u4ea4\u6613\u65f6\u5019\u4f1a\u6309\u624b\u7eed\u8d39\u9ad8\u4f4e\u6392\u5e8f\u5904\u7406\uff0c\u6709\u6548\u671f\u5185\u672a\u88ab\u5904\u7406\u7684\u4ea4\u6613\u4f1a\u88ab\u820d\u5f03\u3002\u4ea4\u6613\u4f5c\u5e9f\u3002"}))),i.a.createElement(c.t,{id:"appendedPrependedInput",size:"16",onChange:this.updateDeadline.bind(this),type:"text",placeholder:"\u4ea4\u6613\u6709\u6548\u671f\uff0c\u9ed8\u8ba45\u5206\u949f"}),i.a.createElement(c.v,{addonType:"append"},i.a.createElement(c.w,null,"minutes(\u5206\u949f)"))))))}},{key:"doDecrypt",value:function(){var t=this;if(!this.state.infoBlocks)return null;if(!this.secret)return void this.setState({dialogMsg:"need login(\u672a\u767b\u5f55)"});var a=[];this.state.infoBlocks.forEach(function(n){var l=void 0;l=n.type>0?k(t.secret,n.pk,n.id,n.block):new e(n.block,"base64").toString(),a.push(l)}.bind(this)),this.setState({decrypted:a})}},{key:"renderEncryptedInfos",value:function(){var e=this;if(!this.state.infoBlocks)return null;var t=0;return this.state.infoBlocks.map(function(a){var n=a.block;return e.state.decrypted&&(n=e.state.decrypted[t]),t++,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,"Block(\u5bc6\u6587):")),i.a.createElement(c.t,{type:"textarea",name:"textarea-input",id:"textarea-input",rows:"3",value:n})))}.bind(this))}},{key:"renderDecryptDialog",value:function(){return i.a.createElement(c.C,{isOpen:this.state.decrypt,toggle:this.toggleDecrypt.bind(this),className:"modal-info "+this.props.className},i.a.createElement(c.F,{toggle:this.toggleDecrypt.bind(this)}," Decrypt(\u4fe1\u606f\u89e3\u5bc6)"),i.a.createElement(c.D,null,i.a.createElement("p",null,"Name (\u7269\u54c1)\uff1a ",this.state.product.title),i.a.createElement("p",null,"Price(\u5356\u5bb6\u539f\u4ef7)\uff1a",this.state.product.price," BTB"),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,null,i.a.createElement(p.a,{onSecret:this.onSecret.bind(this)})))),i.a.createElement(c.s,null,this.renderEncryptedInfos()),i.a.createElement(c.s,null,i.a.createElement(c.a,{color:"danger"},i.a.createElement("small",null,"\u4ea4\u6613\u4fe1\u606f\u5df2\u7ecf\u52a0\u5bc6\uff0c\u53ea\u6709\u4e70\u5356\u53cc\u65b9\u624d\u53ef\u4ee5\u89e3\u5bc6\u3002"))),i.a.createElement(c.s,null,this.renderdialogMsg())),i.a.createElement(c.E,null,i.a.createElement(c.e,{color:"danger",onClick:this.toggleDecrypt.bind(this)},"Cancel(\u53d6\u6d88)"),i.a.createElement(c.e,{color:"danger",onClick:this.doDecrypt.bind(this)},"Decrypt(\u89e3\u5bc6\u4fe1\u606f)")))}},{key:"renderDeliverProductDialog",value:function(){var e=this.state.product.senderId;return i.a.createElement(c.C,{isOpen:this.state.sending,toggle:this.toggleSending.bind(this),className:"modal-info "+this.props.className},i.a.createElement(c.F,{toggle:this.toggleSending.bind(this)},e," Deliver(\u53d1\u8d27)"),i.a.createElement(c.D,null,i.a.createElement("p",null,"Name (\u7269\u54c1)\uff1a ",this.state.product.title),i.a.createElement("p",null,"Price(\u5356\u5bb6\u539f\u4ef7)\uff1a",this.state.product.price," BTB"),i.a.createElement(c.s,null,i.a.createElement(c.x,{htmlFor:"appendedInputButtons"},"Account Secret(BTB\u8d26\u6237\u5bc6\u7801):"),i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,null,i.a.createElement(p.a,{onSecret:this.onSecret.bind(this)})))),this.renderFeeAndDeadline(),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,"Tracking NO.(\u5feb\u9012\u4fe1\u606f):")),i.a.createElement(c.t,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateTracking.bind(this),placeholder:"Tracking NO.(\u5feb\u9012\u5355\u53f7):"})),i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,"Info Block(\u4fe1\u606f\u52a0\u5bc6):")),i.a.createElement(c.t,{type:"textarea",name:"textarea-input",id:"textarea-input",rows:"3",value:this.state.trackingBlock}),i.a.createElement(c.a,{color:"danger"},i.a.createElement("small",null,"\u5feb\u9012\u4fe1\u606f\u52a0\u5bc6\u540e\u53ea\u6709\u4e70\u5bb6\u53ef\u4ee5\u89e3\u5bc6\uff0c\u4efb\u4f55\u5176\u4ed6\u4eba\u90fd\u65e0\u6cd5\u67e5\u770b"))))),i.a.createElement(c.s,null,i.a.createElement(c.a,{color:"danger"},i.a.createElement("small",null,"\u53d1\u8d27\u540e\u7b49\u5f85\u4e70\u5bb6\u6536\u8d27\uff0c\u4e70\u5bb6\u786e\u8ba4\u540e\u7cfb\u7edf\u5c06\u7acb\u5373\u4ed8\u6b3e\uff08\u542b\u4fdd\u8bc1\u91d1\uff09\u7ed9\u5356\u5bb6\u3002"))),i.a.createElement(c.s,null,this.renderdialogMsg())),i.a.createElement(c.E,null,i.a.createElement(c.e,{color:"danger",onClick:this.toggleSending.bind(this)},"Cancel(\u53d6\u6d88)"),i.a.createElement(c.e,{color:"danger",hidden:this.state.success,onClick:this.doSending.bind(this)},"Deliver(\u53d1\u8d27)")))}},{key:"renderPayingProductDialog",value:function(){if(!this.state.product)return null;var e=this.state.winner,t="";return e&&("\u8f93\u5165"+e.accountId+"\u7684\u5bc6\u7801Type "+e.accountId+"'s secret.",t=e.accountId),i.a.createElement(c.C,{isOpen:this.state.paying,toggle:this.togglePay10p.bind(this),className:"modal-info "+this.props.className},i.a.createElement(c.F,{toggle:this.togglePay10p.bind(this)},t," Pay(\u652f\u4ed8)"),i.a.createElement(c.D,null,i.a.createElement("p",null,"Name (\u7269\u54c1)\uff1a ",this.state.product.title),i.a.createElement("p",null,"Price(\u5356\u5bb6\u539f\u4ef7)\uff1a",this.state.product.price," BTB"),i.a.createElement("p",null,"Guarantee(\u5356\u5bb6\u4fdd\u8bc1\u91d1)\uff1a",this.state.product.guarantee," BTB"),i.a.createElement("p",null,"(\u62a2\u8d2d\u4ef7)\uff1a",this.state.product.price/10," BTB"),i.a.createElement(c.s,null,i.a.createElement(c.x,{htmlFor:"appendedInputButtons"},"Account Secret(BTB\u8d26\u6237\u5bc6\u7801):"),i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,null,i.a.createElement(p.a,{onSecret:this.onSecret.bind(this)})))),this.renderFeeAndDeadline(),i.a.createElement(c.s,null,i.a.createElement("div",{className:"controls"},i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,"contact(\u6536\u8d27\u4eba):")),i.a.createElement(c.t,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateContact.bind(this),placeholder:"contact(\u6536\u8d27\u4eba)"})),i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,"phone(\u7535\u8bdd):")),i.a.createElement(c.t,{id:"prependedInput2",size:"16",type:"text",onChange:this.updatePhone.bind(this),placeholder:"phone(\u7535\u8bdd)"})),i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,"Address(\u6536\u8d27\u5730\u5740):")),i.a.createElement(c.t,{id:"prependedInput2",size:"16",type:"text",onChange:this.updateAddress.bind(this),placeholder:"Address(\u6536\u8d27\u5730\u5740)"})),i.a.createElement(c.u,{className:"input-prepend"},i.a.createElement(c.v,{addonType:"prepend"},i.a.createElement(c.w,null,"Address Block(\u52a0\u5bc6\u5730\u5740):")),i.a.createElement(c.t,{type:"textarea",name:"textarea-input",id:"textarea-input",rows:"3",value:this.state.addressBlock}),i.a.createElement(c.a,{color:"danger"},i.a.createElement("small",null,"\u6536\u8d27\u5730\u5740\u52a0\u5bc6\u540e\u53ea\u6709\u5356\u5bb6\u53ef\u4ee5\u89e3\u5bc6\uff0c\u4efb\u4f55\u5176\u4ed6\u4eba\u90fd\u65e0\u6cd5\u67e5\u770b"))))),i.a.createElement(c.s,null,i.a.createElement(c.a,{color:"danger"},i.a.createElement("small",null,"\u4ed8\u6b3e\u4e09\u5929\u540e\u5356\u5bb6\u672a\u53d1\u8d27\uff0c\u8d26\u6237\u5c06\u81ea\u52a8\u83b7\u5f97",this.state.product.price,"BTB \u8865\u507f\u3002"))),i.a.createElement(c.s,null,this.renderdialogMsg())),i.a.createElement(c.E,null,i.a.createElement(c.e,{color:"danger",onClick:this.togglePay10p.bind(this)},"Cancel(\u53d6\u6d88)"),this.renderPayActionButton()))}},{key:"renderPayActionButton",value:function(){return this.state.success?null:i.a.createElement(c.e,{color:"danger",onClick:this.doPaying.bind(this)},"Pay(\u652f\u4ed8)")}},{key:"render",value:function(){return i.a.createElement("div",null,this.renderActionButtons(),this.renderPayingProductDialog(),this.renderDropDialog(),this.renderDeliverProductDialog(),this.renderWinnerConfirmedProductDialog(),this.renderWinner7dayRefundDialog(),this.renderIssueDialog(),this.renderRejectConfirmDialog(),this.renderIssueVotes(),this.renderDecryptDialog())}}]),a}(r.Component));t.a=S}).call(t,a(2).Buffer)}});
//# sourceMappingURL=6.2af95be5.chunk.js.map