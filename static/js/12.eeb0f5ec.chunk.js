webpackJsonp([12],{736:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),o=n.n(c),i=n(8),s=n(43),u=(n.n(s),n(109)),m=n(32),p=(n.n(m),n(276)),h=n(268),f=n.n(h),d=n(269),g=(n.n(d),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),E=function(e){function t(e){a(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={page:1,list:[]},n}return r(t,e),g(t,[{key:"componentDidMount",value:function(){var e=Object(m.loadLocalAccount)();e&&e.secret&&(this.secret=e.secret,this.account=e),this.account&&this.loadAll()}},{key:"loadAll",value:function(){var e=this,t={type:"list",rsId:this.account.rsId,page:this.state.page};Object(s.doMessage)(t,function(t,n){t&&n.ok&&n.list&&e.setState({list:n.list})}.bind(this))}},{key:"prePage",value:function(){this.state.page--,this.loadAll()}},{key:"nextPage",value:function(){this.state.page++,this.loadAll()}},{key:"renderMessageList",value:function(){var e=this,t=this.state.list;return t?t.map(function(t){var n=new Date;n.setTime(t.time);var a=n.toLocaleString();n.setTime(t.update);var l=(n.toLocaleString(),t.block);return l.length>50&&(l=l.substring(0,40)+" ..."),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(u.a,{rsId:t.from})),o.a.createElement("td",null,o.a.createElement(u.a,{rsId:t.to})),o.a.createElement("td",null,l),o.a.createElement("td",null,a),o.a.createElement("td",null,o.a.createElement("div",null,e.renderDecBtn(t),o.a.createElement(p.a,{to:t.from,toPk:t.pk}))))}):null}},{key:"toggleDecrypt",value:function(){this.setState({decrypt:!this.state.decrypt})}},{key:"renderClearMsgDialog",value:function(){return o.a.createElement(i.C,{isOpen:this.state.decrypt,toggle:this.toggleDecrypt.bind(this),className:"modal-info "+this.props.className},o.a.createElement(i.F,{toggle:this.toggleDecrypt.bind(this)},"Decrypt(\u6d88\u606f\u89e3\u5bc6)"),o.a.createElement(i.D,null,o.a.createElement(f.a,{value:this.state.clearMsg})),o.a.createElement(i.E,null,o.a.createElement(i.e,{color:"info",onClick:this.toggleDecrypt.bind(this)},"OK")))}},{key:"renderDecBtn",value:function(e){var t=this;return o.a.createElement(i.e,{color:"primary",size:"sm",onClick:function(n){var a=Object(s.shareDecrypt)(t.secret,e.pk,e.nonce,e.block);t.setState({clearMsg:a,decrypt:!0})}.bind(this)},"Dec(\u89e3\u5bc6)")}},{key:"render",value:function(){var e=this;return o.a.createElement(i.g,null,o.a.createElement(i.h,null,o.a.createElement(i.T,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"From(\u53d1\u9001\u65b9)"),o.a.createElement("th",null,"To(\u63a5\u6536\u65b9)"),o.a.createElement("th",null,"Block(\u52a0\u5bc6\u6d88\u606f)"),o.a.createElement("th",null,"Time(\u65f6\u95f4)"),o.a.createElement("th",null,"Action(\u64cd\u4f5c)"))),o.a.createElement("tbody",null,this.renderMessageList(),this.renderClearMsgDialog())),o.a.createElement("nav",null,o.a.createElement(i.J,null,o.a.createElement(i.K,null,o.a.createElement(i.L,{previous:!0,tag:"button",onClick:function(t){e.prePage()}},"Prev(\u4e0a\u4e00\u9875)")),o.a.createElement(i.K,{active:!0},o.a.createElement(i.L,{tag:"button"},this.state.page)),o.a.createElement(i.K,null,o.a.createElement(i.L,{next:!0,tag:"button",onClick:function(t){e.nextPage()}},"Next(\u4e0b\u4e00\u9875)")))),o.a.createElement(i.a,{color:"danger"},o.a.createElement("small",null,"\u6240\u6709\u6d88\u606f\u90fd\u5e26\u6709\u6570\u5b57\u7b7e\u540d\u4e0e\u65f6\u95f4\u6233\u3002\u5929\u7136\u5177\u6709\u4e0d\u53ef\u4f2a\u9020\uff0c\u4e0d\u53ef\u62b5\u8d56\u3001\u4e0d\u53ef\u7be1\u6539\u7279\u6027\u3002")),o.a.createElement(i.a,{color:"danger"},o.a.createElement("small",null,"\u8d26\u6237\u91d1\u989d\u5168\u90e8\u5927\u4e8e0\u7684\u4e24\u4e2a\u8d26\u6237\u4e4b\u95f4\u624d\u53ef\u4ee5\u53d1\u9001\u6d88\u606f.\u6d88\u606f\u52a0\u5bc6\u540e\u53ea\u6709\u53cc\u65b9\u53ef\u4ee5\u89e3\u5bc6\uff0c\u4efb\u4f55\u5176\u4ed6\u4eba\u90fd\u65e0\u6cd5\u67e5\u770b."))))}}]),t}(c.Component);t.default=E}});
//# sourceMappingURL=12.eeb0f5ec.chunk.js.map