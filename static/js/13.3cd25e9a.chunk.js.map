{"version":3,"sources":["../static/js/13.3cd25e9a.chunk.js","views/eshop/ExchangeList/ExchangeList.js"],"names":["webpackJsonp","735","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_1_reactstrap__","__WEBPACK_IMPORTED_MODULE_2__eshop__","__WEBPACK_IMPORTED_MODULE_3__conponents_AccountDialog_AccountDialog__","__WEBPACK_IMPORTED_MODULE_4__ggv_js_gegeUtil__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","ExchangeList","_Component","this","_this","getPrototypeOf","state","dropdownOpen","page","channelName","list","channel","exchange","action","filterOptions","fee","deadline","account","secret","setState","_this2","token","pk","req","rsId","aid","ok","data","_this3","amount","id","eid","status","tid","console","log","_this4","senderpk","type","dealine","recipientPk","recipientId","msg","dialogMsg","tranferOk","updateExchangeStatus","bind","e","idx","indexOf","substr","filterExchange","loadAll","_this5","map","op","index","a","createElement","onClick","setFilter","isOpen","toggle","toggleActionDialog","className","addonType","size","onChange","updateFee","placeholder","updateDeadline","renderdialogMsg","color","renderPayBtn","doTransfer","v","act","_this6","res","d","Date","setTime","time","btime","toLocaleString","update","random","ip","note","_this7","caret","renderFilterOptions","upateFilterValue","hover","bordered","striped","responsive","renderExchangelist","renderActionDialog","previous","tag","prePage","active","next","nextPage"],"mappings":"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","file":"static/js/13.3cd25e9a.chunk.js","sourcesContent":["webpackJsonp([13],{\n\n/***/ 735:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_reactstrap__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__eshop__ = __webpack_require__(43);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__eshop___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__eshop__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__conponents_AccountDialog_AccountDialog__ = __webpack_require__(109);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ggv_js_gegeUtil__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ggv_js_gegeUtil___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__ggv_js_gegeUtil__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ExchangeList=function(_Component){_inherits(ExchangeList,_Component);function ExchangeList(props){_classCallCheck(this,ExchangeList);var _this=_possibleConstructorReturn(this,(ExchangeList.__proto__||Object.getPrototypeOf(ExchangeList)).call(this,props));_this.state={dropdownOpen:false,page:1,channelName:'选择收款渠道',list:[],channel:-1,exchange:null,action:false};_this.filterOptions=['支付宝账号','微信账号','银行卡账号'];_this.fee='1';_this.deadline='5';return _this;}_createClass(ExchangeList,[{key:'componentDidMount',value:function componentDidMount(){var account=Object(__WEBPACK_IMPORTED_MODULE_4__ggv_js_gegeUtil__[\"loadLocalAccount\"])();if(account&&account.secret){this.secret=account.secret;this.account=account;}}},{key:'toggle',value:function toggle(){this.setState({dropdownOpen:!this.state.dropdownOpen});}},{key:'loadAll',value:function loadAll(){var _this2=this;var token=Object(__WEBPACK_IMPORTED_MODULE_4__ggv_js_gegeUtil__[\"sign\"])(this.account.secret,this.account.pk);var req={page:this.state.page,pk:this.account.pk,rsId:this.account.aid,token:token};Object(__WEBPACK_IMPORTED_MODULE_2__eshop__[\"doExchange\"])(req,'0','5',0,function(ok,data){if(ok&&data&&data.ok){_this2.setState({list:data.list});}});}},{key:'filterExchange',value:function filterExchange(value){var _this3=this;var token=Object(__WEBPACK_IMPORTED_MODULE_4__ggv_js_gegeUtil__[\"sign\"])(this.account.secret,this.account.pk);var req={pk:this.account.pk,rsId:this.account.aid,token:token};if(!value)value=this.state.amount;Object(__WEBPACK_IMPORTED_MODULE_2__eshop__[\"doExchange\"])(req,value,'3',this.state.channel,function(ok,data){if(ok&&data&&data.ok){_this3.setState({list:data.list});}});}},{key:'updateExchangeStatus',value:function updateExchangeStatus(){var token=Object(__WEBPACK_IMPORTED_MODULE_4__ggv_js_gegeUtil__[\"sign\"])(this.account.secret,this.account.pk);var req={pk:this.account.pk,rsId:this.account.rsId,token:token,id:this.state.exchange.eid,status:2,tid:1234};Object(__WEBPACK_IMPORTED_MODULE_2__eshop__[\"doExchange\"])(req,'0','4','0',function(ok,data){if(ok&&data&&data.ok){console.log(data);}else{console.log('err');}});}},{key:'doTransfer',value:function doTransfer(){var _this4=this;var senderpk=this.account.pk;var data={action:'transaction',type:'transfer',amount:''+this.state.exchange.amount,fee:this.fee,dealine:this.deadline,pk:senderpk,recipientPk:this.state.exchange.pk,recipientId:this.state.exchange.id};Object(__WEBPACK_IMPORTED_MODULE_2__eshop__[\"doBShopTransaction\"])(this.secret,data,function(ok,msg){if(ok&&msg.ok){_this4.setState({dialogMsg:'success(成功),等待矿工验证',tranferOk:true});_this4.updateExchangeStatus();}else{_this4.setState({dialogMsg:'err(失败)'});}}.bind(this));}},{key:'upateFilterValue',value:function upateFilterValue(e){if(e&&e.target){var value=e.target.value;this.setState({amount:value});if(value.length>2){var idx=value.indexOf('.');if(idx>0){var flo=value.substr(idx+1);if(flo.length>0){this.filterExchange(value);}}}}}},{key:'prePage',value:function prePage(){this.state.page--;this.loadAll();}},{key:'nextPage',value:function nextPage(){this.state.page++;this.loadAll();}},{key:'setFilter',value:function setFilter(channel){this.setState({channel:channel,channelName:this.filterOptions[channel]});}},{key:'renderFilterOptions',value:function renderFilterOptions(){var _this5=this;var ops=this.filterOptions.map(function(op,index){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"o\" /* DropdownItem */],{onClick:function onClick(e){_this5.setFilter(index);}},op);});return ops;}},{key:'toggleActionDialog',value:function toggleActionDialog(){this.setState({action:!this.state.action,dialogMsg:'',tranferOk:false});}},{key:'renderActionDialog',value:function renderActionDialog(){if(!this.state.exchange)return null;return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"C\" /* Modal */],{isOpen:this.state.action,toggle:this.toggleActionDialog.bind(this),className:'modal-info '+this.props.className},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"F\" /* ModalHeader */],{toggle:this.toggleActionDialog.bind(this)},'Action(\\u64CD\\u4F5C)'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"D\" /* ModalBody */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',null,'\\u7533\\u8BF7\\u8D26\\u53F7\\uFF1A',__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__conponents_AccountDialog_AccountDialog__[\"a\" /* default */],{rsId:this.state.exchange.id})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"s\" /* FormGroup */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'controls'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"u\" /* InputGroup */],{className:'input-prepend'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"v\" /* InputGroupAddon */],{addonType:'prepend'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"w\" /* InputGroupText */],null,'Account PK(\\u8D26\\u6237\\u516C\\u94A5):')),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"t\" /* Input */],{id:'appendedPrependedInput',size:'16',type:'text',value:this.state.exchange.pk})))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"s\" /* FormGroup */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'controls'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"u\" /* InputGroup */],{className:'input-prepend'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"v\" /* InputGroupAddon */],{addonType:'prepend'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"w\" /* InputGroupText */],null,'Amount (\\u8F6C\\u8D26\\u91D1\\u989D):')),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"t\" /* Input */],{id:'appendedPrependedInput',size:'16',type:'text',value:this.state.exchange.amount})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"v\" /* InputGroupAddon */],{addonType:'append'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"w\" /* InputGroupText */],null,'BTB')))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"s\" /* FormGroup */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'controls'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"u\" /* InputGroup */],{className:'input-prepend'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"v\" /* InputGroupAddon */],{addonType:'prepend'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"w\" /* InputGroupText */],null,'Fee(\\u77FF\\u5DE5\\u624B\\u7EED\\u8D39):')),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"t\" /* Input */],{id:'appendedPrependedInput',size:'16',type:'text',onChange:this.updateFee.bind(this),placeholder:'miner Fee \\u533A\\u5757\\u94FE\\u77FF\\u5DE5\\u8D39\\uFF0C\\u6700\\u5C111\\u4E2A'}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"v\" /* InputGroupAddon */],{addonType:'append'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"w\" /* InputGroupText */],null,'BTB'))))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"s\" /* FormGroup */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'controls'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"u\" /* InputGroup */],{className:'input-prepend'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"v\" /* InputGroupAddon */],{addonType:'prepend'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"w\" /* InputGroupText */],null,'Deadline(\\u6709\\u6548\\u671F):')),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"t\" /* Input */],{id:'appendedPrependedInput',size:'16',onChange:this.updateDeadline.bind(this),type:'text',placeholder:'\\u4EA4\\u6613\\u6709\\u6548\\u671F\\uFF0C\\u9ED8\\u8BA45\\u5206\\u949F'}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"v\" /* InputGroupAddon */],{addonType:'append'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"w\" /* InputGroupText */],null,'minutes(\\u5206\\u949F)'))))),this.renderdialogMsg()),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"E\" /* ModalFooter */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"e\" /* Button */],{color:'danger',onClick:this.toggleActionDialog.bind(this)},'\\u53D6\\u6D88'),this.renderPayBtn()));}},{key:'renderPayBtn',value:function renderPayBtn(){if(this.state.tranferOk)return null;return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"e\" /* Button */],{color:'danger',onClick:this.doTransfer.bind(this)},'\\u53D1\\u5E01');}},{key:'renderdialogMsg',value:function renderdialogMsg(){if(this.state.dialogMsg){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"x\" /* Label */],null,this.state.dialogMsg);}return null;}},{key:'updateFee',value:function updateFee(e){if(e&&e.target){var v=e.target.value;if(v&&v.length>0)this.fee=v;}}},{key:'updateDeadline',value:function updateDeadline(e){if(e&&e.target){var act=e.target.value;this.deadline=act;}}},{key:'renderExchangelist',value:function renderExchangelist(){var _this6=this;var list=this.state.list;if(!list)return null;var content=list.map(function(res){var d=new Date();d.setTime(res.time);var btime=d.toLocaleString();//\nd.setTime(res.update);var update=d.toLocaleString();return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('tr',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__conponents_AccountDialog_AccountDialog__[\"a\" /* default */],{rsId:res.id})),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,res.amount,' BTB'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,res.random,' \\u5143'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,res.channel),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,res.ip),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,btime),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,update),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,Object(__WEBPACK_IMPORTED_MODULE_2__eshop__[\"getExchangeStatus\"])(res.status)),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,res.note),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('td',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"e\" /* Button */],{size:'sm',onClick:function(e){_this6.setState({exchange:res});_this6.toggleActionDialog();}.bind(_this6)},'\\u64CD\\u4F5C')));});return content;}},{key:'render',value:function render(){var _this7=this;return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"g\" /* Card */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"h\" /* CardBody */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"e\" /* Button */],{color:'primary',onClick:function onClick(e){return _this7.loadAll();}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('i',{className:'fa fa-search'}),'\\u663E\\u793A\\u5168\\u90E8'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"u\" /* InputGroup */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"f\" /* ButtonDropdown */],{isOpen:this.state.dropdownOpen,toggle:function toggle(){_this7.toggle();}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"q\" /* DropdownToggle */],{caret:true},this.state.channelName),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"p\" /* DropdownMenu */],null,this.renderFilterOptions())),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"t\" /* Input */],{placeholder:'\\u8F93\\u5165\\u5DF2\\u6536\\u6B3E\\u91D1\\u989D\\uFF0C\\u7CBE\\u786E\\u5230\\u5C0F\\u6570\\u70B9\\u4E24\\u4F4D\\u641C\\u7D22',onChange:this.upateFilterValue.bind(this)}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"e\" /* Button */],{color:'primary',onClick:function onClick(e){return _this7.filterExchange();}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('i',{className:'fa fa-search'}),'\\xA0')),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"T\" /* Table */],{hover:true,bordered:true,striped:true,responsive:true,size:'sm'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('thead',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('tr',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',null,'ID'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',null,'Amount(\\u91D1\\u989D)'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',null,'\\u968F\\u673A\\u91D1\\u989D(\\u91D1\\u989D)'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',null,'Channel(\\u6E20\\u9053)'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',null,'Ip\\u5730\\u5740'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',null,'Time(\\u7533\\u8BF7\\u65F6\\u95F4)'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',null,'Update(\\u66F4\\u65B0\\u65F6\\u95F4)'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',null,'Status(\\u6700\\u65B0\\u72B6\\u6001)'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',null,'Note(\\u5907\\u6CE8)'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('th',null,'Action(\\u64CD\\u4F5C)'))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('tbody',null,this.renderExchangelist(),this.renderActionDialog())),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('nav',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"J\" /* Pagination */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"K\" /* PaginationItem */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"L\" /* PaginationLink */],{previous:true,tag:'button',onClick:function onClick(e){_this7.prePage();}},'Prev(\\u4E0A\\u4E00\\u9875)')),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"K\" /* PaginationItem */],{active:true},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"L\" /* PaginationLink */],{tag:'button'},this.state.page)),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"K\" /* PaginationItem */],null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"L\" /* PaginationLink */],{next:true,tag:'button',onClick:function onClick(e){_this7.nextPage();}},'Next(\\u4E0B\\u4E00\\u9875)')))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_reactstrap__[\"a\" /* Alert */],{color:'danger'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('small',null,'\\u8D26\\u6237\\u91D1\\u989D\\u5927\\u4E8E10000\\u7684\\u8D26\\u6237\\u624D\\u6709\\u6743\\u9650\\u67E5\\u770B\\u7CFB\\u7EDF\\u5145\\u503C\\u5217\\u8868.'))));}}]);return ExchangeList;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);/* harmony default export */ __webpack_exports__[\"default\"] = (ExchangeList);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/13.3cd25e9a.chunk.js","import React, { Component } from 'react';\r\nimport { Badge, Card, CardBody, CardHeader, Col, Pagination, PaginationItem, PaginationLink, Row, Table } from 'reactstrap';\r\nimport { Button, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\r\nimport { CardGroup, Container, Form, FormGroup, Fade, Alert, Label } from 'reactstrap'\r\nimport { Modal, ModalBody, ModalFooter, ModalHeader, ButtonDropdown, DropdownItem, DropdownMenu, DropdownToggle } from 'reactstrap'\r\nimport { doExchange, doBShopTransaction, getExchangeStatus } from '../eshop'\r\nimport AccountDialog from '../../conponents/AccountDialog/AccountDialog'\r\nimport { loadLocalAccount, sign } from '../../ggv/js/gegeUtil'\r\nclass ExchangeList extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { dropdownOpen: false, page: 1, channelName: '选择收款渠道', list: [], channel: -1, exchange: null, action: false }\r\n    this.filterOptions = ['支付宝账号', '微信账号', '银行卡账号']\r\n    this.fee = '1'\r\n    this.deadline = '5';\r\n  }\r\n\r\n  componentDidMount() {\r\n    let account = loadLocalAccount();\r\n    if (account && account.secret) {\r\n      this.secret = account.secret;\r\n      this.account = account;\r\n    }\r\n  }\r\n\r\n  toggle() {\r\n    this.setState({\r\n      dropdownOpen: !this.state.dropdownOpen\r\n    })\r\n  }\r\n\r\n  loadAll() {\r\n    let token = sign(this.account.secret, this.account.pk)\r\n    let req = { page: this.state.page, pk: this.account.pk, rsId: this.account.aid, token }\r\n    doExchange(req, '0', '5', 0, (ok, data) => {\r\n      if (ok && data && data.ok) {\r\n        this.setState({ list: data.list })\r\n      }\r\n    })\r\n  }\r\n\r\n  filterExchange(value) {\r\n    let token = sign(this.account.secret, this.account.pk)\r\n    let req = { pk: this.account.pk, rsId: this.account.aid, token }\r\n    if (!value)\r\n      value = this.state.amount;\r\n    doExchange(req, value, '3', this.state.channel, (ok, data) => {\r\n      if (ok && data && data.ok) {\r\n        this.setState({ list: data.list })\r\n      }\r\n    })\r\n  }\r\n\r\n  updateExchangeStatus() {\r\n    let token = sign(this.account.secret, this.account.pk)\r\n    let req = { pk: this.account.pk, rsId: this.account.rsId, token, id: this.state.exchange.eid, status: 2, tid: 1234 }\r\n    doExchange(req, '0', '4', '0', (ok, data) => {\r\n      if (ok && data && data.ok) {\r\n        console.log(data)\r\n      } else {\r\n        console.log('err');\r\n      }\r\n    })\r\n  }\r\n\r\n  doTransfer() {\r\n    let senderpk = this.account.pk\r\n    let data = {\r\n      action: 'transaction', type: 'transfer', amount: '' + this.state.exchange.amount,\r\n      fee: this.fee, dealine: this.deadline, pk: senderpk, recipientPk: this.state.exchange.pk,\r\n      recipientId: this.state.exchange.id\r\n    };\r\n\r\n    doBShopTransaction(this.secret, data, ((ok, msg) => {\r\n      if (ok && msg.ok) {\r\n        this.setState({ dialogMsg: 'success(成功),等待矿工验证', tranferOk: true })\r\n        this.updateExchangeStatus();\r\n      } else {\r\n        this.setState({ dialogMsg: 'err(失败)' })\r\n      }\r\n    }).bind(this))\r\n  }\r\n\r\n\r\n  upateFilterValue(e) {\r\n    if (e && e.target) {\r\n      let value = e.target.value;\r\n      this.setState({ amount: value })\r\n      if (value.length > 2) {\r\n        let idx = value.indexOf('.');\r\n        if (idx > 0) {\r\n          let flo = value.substr(idx + 1);\r\n          if (flo.length > 0) {\r\n            this.filterExchange(value)\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  prePage() {\r\n    this.state.page--\r\n    this.loadAll()\r\n  }\r\n\r\n  nextPage() {\r\n    this.state.page++\r\n    this.loadAll()\r\n  }\r\n\r\n  setFilter(channel) {\r\n    this.setState({ channel: channel, channelName: this.filterOptions[channel] })\r\n  }\r\n\r\n  renderFilterOptions() {\r\n    let ops = this.filterOptions.map((op, index) => {\r\n      return (<DropdownItem onClick={(e) => {\r\n        this.setFilter(index)\r\n      }}>{op}</DropdownItem>)\r\n    })\r\n    return ops;\r\n  }\r\n\r\n  toggleActionDialog() {\r\n    this.setState({ action: !this.state.action, dialogMsg: '', tranferOk: false })\r\n  }\r\n\r\n  renderActionDialog() {\r\n    if (!this.state.exchange)\r\n      return null;\r\n    return (<Modal isOpen={this.state.action} toggle={this.toggleActionDialog.bind(this)}\r\n      className={'modal-info ' + this.props.className}>\r\n      <ModalHeader toggle={this.toggleActionDialog.bind(this)}>Action(操作)</ModalHeader>\r\n      <ModalBody>\r\n        <div>申请账号：<AccountDialog rsId={this.state.exchange.id} /></div>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>Account PK(账户公钥):</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"appendedPrependedInput\" size=\"16\" type=\"text\" value={this.state.exchange.pk} />\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>Amount (转账金额):</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"appendedPrependedInput\" size=\"16\" type=\"text\" value={this.state.exchange.amount} />\r\n            </InputGroup>\r\n            <InputGroupAddon addonType=\"append\">\r\n              <InputGroupText>BTB</InputGroupText>\r\n            </InputGroupAddon>\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>Fee(矿工手续费):</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"appendedPrependedInput\" size=\"16\" type=\"text\" onChange={this.updateFee.bind(this)} placeholder='miner Fee 区块链矿工费，最少1个' />\r\n              <InputGroupAddon addonType=\"append\">\r\n                <InputGroupText>BTB</InputGroupText>\r\n              </InputGroupAddon>\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        <FormGroup>\r\n          <div className=\"controls\">\r\n            <InputGroup className=\"input-prepend\">\r\n              <InputGroupAddon addonType=\"prepend\">\r\n                <InputGroupText>Deadline(有效期):</InputGroupText>\r\n              </InputGroupAddon>\r\n              <Input id=\"appendedPrependedInput\" size=\"16\" onChange={this.updateDeadline.bind(this)} type=\"text\" placeholder='交易有效期，默认5分钟' />\r\n              <InputGroupAddon addonType=\"append\">\r\n                <InputGroupText>minutes(分钟)</InputGroupText>\r\n              </InputGroupAddon>\r\n            </InputGroup>\r\n          </div>\r\n        </FormGroup>\r\n        {this.renderdialogMsg()}\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <Button color=\"danger\" onClick={this.toggleActionDialog.bind(this)}>取消</Button>\r\n        {this.renderPayBtn()}\r\n      </ModalFooter>\r\n    </Modal>)\r\n  }\r\n\r\n  renderPayBtn() {\r\n    if (this.state.tranferOk)\r\n      return null;\r\n    return (<Button color=\"danger\" onClick={this.doTransfer.bind(this)}>发币</Button>)\r\n  }\r\n\r\n  renderdialogMsg() {\r\n    if (this.state.dialogMsg) {\r\n      return (<Label>{this.state.dialogMsg}</Label>)\r\n    }\r\n    return null;\r\n  }\r\n\r\n  updateFee(e) {\r\n    if (e && e.target) {\r\n      let v = e.target.value;\r\n      if (v && v.length > 0)\r\n        this.fee = v;\r\n    }\r\n  }\r\n  updateDeadline(e) {\r\n    if (e && e.target) {\r\n      let act = e.target.value;\r\n      this.deadline = act;\r\n    }\r\n  }\r\n\r\n  renderExchangelist() {\r\n    let list = this.state.list;\r\n    if (!list)\r\n      return null;\r\n    let content = list.map((res) => {\r\n      let d = new Date();\r\n      d.setTime(res.time)\r\n      let btime = d.toLocaleString()\r\n      //\r\n      d.setTime(res.update)\r\n      let update = d.toLocaleString()\r\n      return (<tr>\r\n        <td><AccountDialog rsId={res.id} /></td>\r\n        <td>{res.amount} BTB</td>\r\n        <td>{res.random} 元</td>\r\n        <td>{res.channel}</td>\r\n        <td>{res.ip}</td>\r\n        <td>{btime}</td>\r\n        <td>{update}</td>\r\n        <td>{getExchangeStatus(res.status)}</td>\r\n        <td>{res.note}</td>\r\n        <td><Button size='sm' onClick={((e) => {\r\n          this.setState({ exchange: res })\r\n          this.toggleActionDialog()\r\n        }).bind(this)}>操作</Button></td>\r\n      </tr>)\r\n    });\r\n\r\n    return content;\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <Card>\r\n        <CardBody>\r\n          <Button color=\"primary\" onClick={(e) => this.loadAll()}>\r\n            <i className=\"fa fa-search\"></i>显示全部\r\n                </Button>\r\n          <InputGroup>\r\n            <ButtonDropdown isOpen={this.state.dropdownOpen} toggle={() => { this.toggle(); }}>\r\n              <DropdownToggle caret>\r\n                {this.state.channelName}\r\n              </DropdownToggle>\r\n              <DropdownMenu>\r\n                {this.renderFilterOptions()}\r\n              </DropdownMenu>\r\n            </ButtonDropdown>\r\n            <Input placeholder='输入已收款金额，精确到小数点两位搜索' onChange={this.upateFilterValue.bind(this)} />\r\n            <Button color=\"primary\" onClick={(e) => this.filterExchange()}>\r\n              <i className=\"fa fa-search\"></i>&nbsp;\r\n                </Button>\r\n          </InputGroup>\r\n          <Table hover bordered striped responsive size=\"sm\">\r\n            <thead>\r\n              <tr>\r\n                <th>ID</th>\r\n                <th>Amount(金额)</th>\r\n                <th>随机金额(金额)</th>\r\n                <th>Channel(渠道)</th>\r\n                <th>Ip地址</th>\r\n                <th>Time(申请时间)</th>\r\n                <th>Update(更新时间)</th>\r\n                <th>Status(最新状态)</th>\r\n                <th>Note(备注)</th>\r\n                <th>Action(操作)</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.renderExchangelist()}\r\n              {this.renderActionDialog()}\r\n            </tbody>\r\n          </Table>\r\n          <nav>\r\n            <Pagination>\r\n              <PaginationItem><PaginationLink previous tag=\"button\" onClick={(e) => { this.prePage() }}>Prev(上一页)</PaginationLink></PaginationItem>\r\n              <PaginationItem active>\r\n                <PaginationLink tag=\"button\">{this.state.page}</PaginationLink>\r\n              </PaginationItem>\r\n              <PaginationItem><PaginationLink next tag=\"button\" onClick={(e) => { this.nextPage() }}>Next(下一页)</PaginationLink></PaginationItem>\r\n            </Pagination>\r\n          </nav>\r\n          <Alert color=\"danger\"><small>账户金额大于10000的账户才有权限查看系统充值列表.</small></Alert>\r\n        </CardBody>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ExchangeList;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/eshop/ExchangeList/ExchangeList.js"],"sourceRoot":""}